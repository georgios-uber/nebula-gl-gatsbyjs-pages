(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{196:function(e,t,n){"use strict";n.r(t);var i=n(2),o=n.n(i),r=n(0),a=n.n(r),s=n(9),l=(n(75),n(76),n(7),n(84),n(273)),d=n.n(l),c=n(406),u=n(208),p=n(392),g=n(250),h=n.n(g),f=n(267),v=n.n(f),y=n(393),m=0,C=1,S=2,x=3,P=n(404),b=n(205),w=(n(287),n(268)),k=n.n(w),F=n(271),M=n(234),I=n(216),E=n.n(I),D=null,A="rectangle",H="polygon",L=(n(20),n(14),n(11),n(236),n(289)),_=n.n(L),T=n(364),O=n.n(T),j=(_.a,n(249),n(221),n(228),n(409)),R=n(395),z=n(397),G=(n(80),n(77),n(78),n(293)),W=n.n(G),B=n(294),N=n.n(B),q=function(){function e(){}var t=e.prototype;return t.getState=function(){return this.state},t.updateState=function(e){var t=this,n=this.state,i=[];this.state&&this.state.data===e.data||i.push(this.onDataChanged),this.state&&this.state.modeConfig===e.modeConfig||i.push(this.onModeConfigChanged),this.state&&this.state.selectedIndexes===e.selectedIndexes||i.push(this.onSelectedIndexesChanged),this.state&&this.state.guides===e.guides||i.push(this.onGuidesChanged),this.state=e,i.forEach(function(e){return e.bind(t)(n)})},t.handleClick=function(e){},t.handlePointerMove=function(e){},t.handleStartDragging=function(e){},t.handleStopDragging=function(e){},t.onDataChanged=function(e){},t.onModeConfigChanged=function(e){},t.onSelectedIndexesChanged=function(e){},t.onGuidesChanged=function(e){},t.getData=function(){return this.state.data},t.getModeConfig=function(){return this.state.modeConfig},t.getSelectedIndexes=function(){return this.state.selectedIndexes},t.getGuides=function(){return this.state&&this.state.guides},t.getCursor=function(){return this.state&&this.state.cursor},t.onEdit=function(e){this.state.onEdit(e)},t.onUpdateGuides=function(e){this.state.onUpdateGuides(e)},t.onUpdateCursor=function(e){this.state.onUpdateCursor(e)},e}(),U=function(){function e(e){this.featureCollection=e}var t=e.prototype;return t.getObject=function(){return this.featureCollection},t.replacePosition=function(e,t,n){var i=this.featureCollection.features[e].geometry,o="Polygon"===i.type||"MultiPolygon"===i.type,r=Object.assign({},i,{coordinates:V(i.coordinates,t,n,o)});return this.replaceGeometry(e,r)},t.removePosition=function(e,t){var n=this.featureCollection.features[e].geometry;if("Point"===n.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===n.type&&n.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===n.type&&n.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===n.type&&n.coordinates[0].length<5&&0===t[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===n.type&&1===n.coordinates.length&&n.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===n.type&&1===n.coordinates.length&&n.coordinates[0][0].length<5&&0===t[0]&&0===t[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");var i="Polygon"===n.type||"MultiPolygon"===n.type,o=Object.assign({},n,{coordinates:Z(n.coordinates,t,i)});return function(e){switch(e.type){case"Polygon":!function(e){for(var t=e.coordinates,n=1;n<t.length;n++)X(t,n)&&n--}(e);break;case"MultiLineString":!function(e){for(var t=0;t<e.coordinates.length;t++){var n=e.coordinates[t];1===n.length&&(e.coordinates.splice(t,1),t--)}}(e);break;case"MultiPolygon":!function(e){for(var t=0;t<e.coordinates.length;t++){var n=e.coordinates[t],i=n[0];i.length<=3&&(e.coordinates.splice(t,1),t--);for(var o=1;o<n.length;o++)X(n,o)&&o--}}(e)}}(o),this.replaceGeometry(e,o)},t.addPosition=function(e,t,n){var i=this.featureCollection.features[e].geometry;if("Point"===i.type)throw new Error("Unable to add a position to a Point feature");var o="Polygon"===i.type||"MultiPolygon"===i.type,r=Object.assign({},i,{coordinates:K(i.coordinates,t,n,o)});return this.replaceGeometry(e,r)},t.replaceGeometry=function(t,n){var i=Object.assign({},this.featureCollection.features[t],{geometry:n});return new e(Object.assign({},this.featureCollection,{features:[].concat(this.featureCollection.features.slice(0,t),[i],this.featureCollection.features.slice(t+1))}))},t.addFeature=function(t){return new e(Object.assign({},this.featureCollection,{features:[].concat(this.featureCollection.features,[t])}))},e}();function J(e,t){if(2===e.length&&3===t.length){var n=t[2];return[e[0],e[1],n]}return e}function V(e,t,n,i){if(!t)return e;if(0===t.length)return J(n,e);if(1===t.length){var o=[].concat(e.slice(0,t[0]),[J(n,e[t[0]])],e.slice(t[0]+1));return!i||0!==t[0]&&t[0]!==e.length-1||(o[0]=J(n,e[0]),o[e.length-1]=J(n,e[0])),o}return[].concat(e.slice(0,t[0]),[V(e[t[0]],t.slice(1,t.length),n,i)],e.slice(t[0]+1))}function Z(e,t,n){if(!t)return e;if(0===t.length)throw Error("Must specify the index of the position to remove");if(1===t.length){var i=[].concat(e.slice(0,t[0]),e.slice(t[0]+1));return!n||0!==t[0]&&t[0]!==e.length-1||(0===t[0]?i[i.length-1]=i[0]:t[0]===e.length-1&&(i[0]=i[i.length-1])),i}return[].concat(e.slice(0,t[0]),[Z(e[t[0]],t.slice(1,t.length),n)],e.slice(t[0]+1))}function K(e,t,n,i){if(!t)return e;if(0===t.length)throw Error("Must specify the index of the position to remove");return 1===t.length?[].concat(e.slice(0,t[0]),[n],e.slice(t[0])):[].concat(e.slice(0,t[0]),[K(e[t[0]],t.slice(1,t.length),n,i)],e.slice(t[0]+1))}function X(e,t){return e[t].length<=3&&(e.splice(t,1),!0)}var Q=[],Y=function(e){function t(t){var n;return(n=e.call(this)||this)._clickSequence=[],t&&n.setFeatureCollection(t),n}o()(t,e);var n=t.prototype;return n.getFeatureCollection=function(){return this.featureCollection.getObject()},n.getImmutableFeatureCollection=function(){return this.featureCollection},n.getSelectedFeature=function(){return 1===this.getSelectedIndexes().length?this.featureCollection.getObject().features[this.getSelectedIndexes()[0]]:null},n.getSelectedGeometry=function(){var e=this.getSelectedFeature();return e?e.geometry:null},n.getSelectedFeaturesAsFeatureCollection=function(){var e=this.featureCollection.getObject().features;return{type:"FeatureCollection",features:this.getSelectedFeatureIndexes().map(function(t){return e[t]})}},n.onDataChanged=function(){this.setFeatureCollection(this.getData()),this._refreshEditHandles()},n.setFeatureCollection=function(e){this.featureCollection=new U(e)},n.setModeConfig=function(e){console.warn("TODO: call to obsolete setModeConfig")},n.getSelectedFeatureIndexes=function(){return this.getSelectedIndexes()},n.setSelectedFeatureIndexes=function(e){console.warn("TODO: call to obsolete setSelectedFeatureIndexes")},n.onSelectedIndexesChanged=function(){this._setTentativeFeature(null)},n.onGuidesChanged=function(e){var t=this.getGuides();t||(this._clickSequence=[]),e&&e.guides&&t&&e.guides.tentativeFeature!==t.tentativeFeature&&this._refreshEditHandles()},n.getClickSequence=function(){return this._clickSequence},n.resetClickSequence=function(){this._clickSequence=[]},n.getTentativeFeature=function(){return(this.getGuides()||{}).tentativeFeature},n.getEditHandles=function(){return(this.getGuides()||{editHandles:Q}).editHandles},n._setTentativeFeature=function(e){this.getState().onUpdateGuides({tentativeFeature:e,editHandles:this.getEditHandles()})},n._refreshEditHandles=function(e,t){this.getState().onUpdateGuides({tentativeFeature:this.getTentativeFeature(),editHandles:this.getEditHandlesAdapter(e,t)})},n._refreshCursor=function(){var e=this.getCursor(),t=this.getCursorAdapter({isDragging:!1});e!==t&&this.onUpdateCursor(t)},n.getEditHandlesAdapter=function(e,t,n){return Q},n.getCursorAdapter=function(e){e.isDragging;return"cell"},n.isSelectionPicked=function(e){if(!e.length)return!1;var t=e.map(function(e){return e.index});return this.getSelectedFeatureIndexes().some(function(e){return t.includes(e)})},n.getAddFeatureAction=function(e){var t=e,n=this.getImmutableFeatureCollection().addFeature({type:"Feature",properties:{},geometry:t}).getObject();return{updatedData:n,editType:"addFeature",editContext:{featureIndexes:[n.features.length-1]}}},n.getAddManyFeaturesAction=function(e){var t=e.features,n=this.getImmutableFeatureCollection(),i=n.getObject().features.length,o=[],r=t,a=Array.isArray(r),s=0;for(r=a?r:r[Symbol.iterator]();;){var l;if(a){if(s>=r.length)break;l=r[s++]}else{if((s=r.next()).done)break;l=s.value}var d=l,c=d.properties,u=d.geometry;n=n.addFeature({type:"Feature",properties:c,geometry:u}),o.push(i+o.length)}return{updatedData:n.getObject(),editType:"addFeature",editContext:{featureIndexes:o}}},n.getAddFeatureOrBooleanPolygonAction=function(e){var t=this.getSelectedFeature(),n=this.getModeConfig();if(n&&n.booleanOperation){if(!t||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var i,o={type:"Feature",geometry:e};if("union"===n.booleanOperation)i=W()(t,o);else if("difference"===n.booleanOperation)i=Object(M.a)(t,o);else{if("intersection"!==n.booleanOperation)return console.warn("Invalid booleanOperation "+n.booleanOperation),null;i=N()(t,o)}if(!i)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var r=this.getSelectedFeatureIndexes()[0];return{updatedData:this.getImmutableFeatureCollection().replaceGeometry(r,i.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[r]}}}return this.getAddFeatureAction(e)},n.handleClick=function(e){var t=this.handleClickAdapter(e);this._refreshEditHandles(e.picks,e.mapCoords),t&&this.onEdit(t)},n.handlePointerMove=function(e){var t=this.handlePointerMoveAdapter(e),n=t.editAction;t.cancelMapPan&&e.sourceEvent.stopPropagation(),this._refreshCursor(),this._refreshEditHandles(e.picks,e.mapCoords),n&&this.onEdit(n)},n.handleStartDragging=function(e){var t=this.handleStartDraggingAdapter(e);this._refreshEditHandles(e.picks,e.mapCoords),t&&this.onEdit(t)},n.handleStopDragging=function(e){var t=this.handleStopDraggingAdapter(e);this._refreshEditHandles(e.picks,e.mapCoords),t&&this.onEdit(t)},n.handleClickAdapter=function(e){return this._clickSequence.push(e.mapCoords),null},n.handlePointerMoveAdapter=function(e){return{editAction:null,cancelMapPan:!1}},n.handleStartDraggingAdapter=function(e){return null},n.handleStopDraggingAdapter=function(e){return null},t}(q);function $(e,t,n,i){void 0===i&&(i="existing");for(var o=[],r=0;r<e.length;r++){var a=e[r];o.push({position:a,positionIndexes:[].concat(t,[r]),featureIndex:n,type:i})}return o}var ee=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t}(Y),te=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.getEditHandlesAdapter=function(t,n){var i=e.prototype.getEditHandlesAdapter.call(this,t,n),o=this.getTentativeFeature();return o&&(i=i.concat(function(e,t,n){void 0===n&&(n="existing");var i=[];switch(e.type){case"Point":i=[{position:e.coordinates,positionIndexes:[],featureIndex:t,type:n}];break;case"MultiPoint":case"LineString":i=i.concat($(e.coordinates,[],t,n));break;case"Polygon":case"MultiLineString":for(var o=0;o<e.coordinates.length;o++)i=i.concat($(e.coordinates[o],[o],t,n)),"Polygon"===e.type&&(i=i.slice(0,-1));break;case"MultiPolygon":for(var r=0;r<e.coordinates.length;r++)for(var a=0;a<e.coordinates[r].length;a++)i=(i=i.concat($(e.coordinates[r][a],[r,a],t,n))).slice(0,-1);break;default:throw Error("Unhandled geometry type: "+e.type)}return i}(o.geometry,-1)),o&&"LineString"===o.geometry.type?i=i.slice(0,-1):o&&"Polygon"===o.geometry.type&&(i=i.slice(0,-1))),i},n.handleClickAdapter=function(t){e.prototype.handleClickAdapter.call(this,t);var n=t.picks,i=this.getTentativeFeature(),o=null,r=function(e){var t=e&&e.find(function(e){return e.isGuide});return t?t.object:null}(n);if(r){var a=this.getClickSequence();a.splice(a.length-1,1)}if(i&&"Polygon"===i.geometry.type){var s=i.geometry;if(r&&-1===r.featureIndex&&(0===r.positionIndexes[1]||r.positionIndexes[1]===s.coordinates[0].length-3)){var l={type:"Polygon",coordinates:[[].concat(s.coordinates[0].slice(0,-2),[s.coordinates[0][0]])]};this.resetClickSequence(),this._setTentativeFeature(null),o=this.getAddFeatureOrBooleanPolygonAction(l)}}var d={screenCoords:[-1,-1],mapCoords:t.mapCoords,picks:[],isDragging:!1,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,sourceEvent:null};return this.handlePointerMoveAdapter(d),o},n.handlePointerMoveAdapter=function(e){var t=e.mapCoords,n=this.getClickSequence(),i={editAction:null,cancelMapPan:!1};return 0===n.length?i:(n.length<3?this._setTentativeFeature({type:"Feature",geometry:{type:"LineString",coordinates:[].concat(n,[t])}}):this._setTentativeFeature({type:"Feature",geometry:{type:"Polygon",coordinates:[[].concat(n,[t,n[0]])]}}),i)},t}(Y),ne=function(){function e(e){this._modeConfig=null,this._selectedFeatureIndexes=[],this._clickSequence=[],e&&this.setFeatureCollection(e)}var t=e.prototype;return t.getFeatureCollection=function(){return this.featureCollection.getObject()},t.getImmutableFeatureCollection=function(){return this.featureCollection},t.getSelectedFeature=function(){return 1===this._selectedFeatureIndexes.length?this.featureCollection.getObject().features[this._selectedFeatureIndexes[0]]:null},t.getSelectedGeometry=function(){var e=this.getSelectedFeature();return e?e.geometry:null},t.getSelectedFeaturesAsFeatureCollection=function(){var e=this.featureCollection.getObject().features;return{type:"FeatureCollection",features:this.getSelectedFeatureIndexes().map(function(t){return e[t]})}},t.setFeatureCollection=function(e){this.featureCollection=new U(e)},t.getModeConfig=function(){return this._modeConfig},t.setModeConfig=function(e){this._modeConfig!==e&&(this._modeConfig=e,this._setTentativeFeature(null))},t.getSelectedFeatureIndexes=function(){return this._selectedFeatureIndexes},t.setSelectedFeatureIndexes=function(e){this._selectedFeatureIndexes!==e&&(this._selectedFeatureIndexes=e,this._setTentativeFeature(null))},t.getClickSequence=function(){return this._clickSequence},t.resetClickSequence=function(){this._clickSequence=[]},t.getTentativeFeature=function(){return this._tentativeFeature},t._setTentativeFeature=function(e){this._tentativeFeature=e,e||(this._clickSequence=[])},t.getEditHandles=function(e,t){return[]},t.getCursor=function(e){e.isDragging;return"cell"},t.isSelectionPicked=function(e){if(!e.length)return!1;var t=e.map(function(e){return e.index});return this.getSelectedFeatureIndexes().some(function(e){return t.includes(e)})},t.getAddFeatureAction=function(e){var t=e,n=this.getImmutableFeatureCollection().addFeature({type:"Feature",properties:{},geometry:t}).getObject();return{updatedData:n,editType:"addFeature",featureIndexes:[n.features.length-1],editContext:null}},t.getAddManyFeaturesAction=function(e){var t=e.features,n=this.getImmutableFeatureCollection(),i=n.getObject().features.length,o=[],r=t,a=Array.isArray(r),s=0;for(r=a?r:r[Symbol.iterator]();;){var l;if(a){if(s>=r.length)break;l=r[s++]}else{if((s=r.next()).done)break;l=s.value}var d=l,c=d.properties,u=d.geometry;n=n.addFeature({type:"Feature",properties:c,geometry:u}),o.push(i+o.length)}return{updatedData:n.getObject(),editType:"addFeature",featureIndexes:o,editContext:null}},t.getAddFeatureOrBooleanPolygonAction=function(e){var t=this.getSelectedFeature(),n=this.getModeConfig();if(n&&n.booleanOperation){if(!t||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var i,o={type:"Feature",geometry:e};if("union"===n.booleanOperation)i=W()(t,o);else if("difference"===n.booleanOperation)i=Object(M.a)(t,o);else{if("intersection"!==n.booleanOperation)return console.warn("Invalid booleanOperation "+n.booleanOperation),null;i=N()(t,o)}if(!i)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var r=this.getSelectedFeatureIndexes()[0];return{updatedData:this.getImmutableFeatureCollection().replaceGeometry(r,i.geometry).getObject(),editType:"unionGeometry",featureIndexes:[r],editContext:null}}return this.getAddFeatureAction(e)},t.handleClick=function(e){return this._clickSequence.push(e.groundCoords),null},t.handlePointerMove=function(e){return{editAction:null,cancelMapPan:!1}},t.handleStartDragging=function(e){return null},t.handleStopDragging=function(e){return null},e}();function ie(e){var t=e&&e.find(function(e){return e.isEditingHandle});return t?t.object:null}function oe(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function re(e,t,n){void 0===n&&(n="existing");var i=[];switch(e.type){case"Point":i=[{position:e.coordinates,positionIndexes:[],featureIndex:t,type:n}];break;case"MultiPoint":case"LineString":i=i.concat(ae(e.coordinates,[],t,n));break;case"Polygon":case"MultiLineString":for(var o=0;o<e.coordinates.length;o++)i=i.concat(ae(e.coordinates[o],[o],t,n)),"Polygon"===e.type&&(i=i.slice(0,-1));break;case"MultiPolygon":for(var r=0;r<e.coordinates.length;r++)for(var a=0;a<e.coordinates[r].length;a++)i=(i=i.concat(ae(e.coordinates[r][a],[r,a],t,n))).slice(0,-1);break;default:throw Error("Unhandled geometry type: "+e.type)}return i}function ae(e,t,n,i){void 0===i&&(i="existing");for(var o=[],r=0;r<e.length;r++){var a=e[r];o.push({position:a,positionIndexes:[].concat(t,[r]),featureIndex:n,type:i})}return o}var se=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.getCursor=function(e){return e.isDragging?"grabbing":"grab"},n.getEditHandles=function(e,t){return[]},t}(ne),le=n(295),de=n.n(le),ce=n(233),ue=n.n(ce),pe=n(222),ge=n.n(pe),he=n(374),fe=n.n(he);function ve(e,t,n){var i={type:"LineString",coordinates:[e,t]},o=Object(b.point)(n),r=fe()(o,i),a=ge()(e,t),s=(n[0]-e[0])*(t[1]-e[1])-(n[1]-e[1])*(t[0]-e[0])<0?a-90:a-270,l=ue()(t,r,s),d=ue()(e,r,s);return[l.geometry.coordinates,d.geometry.coordinates]}function ye(e,t,n,i){var o=e-n,r=t-i;return Math.sqrt(o*o+r*r)}var me=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.getEditHandles=function(e,t){var n=this,i=[],o=this.featureCollection.getObject().features,r=this.getSelectedFeatureIndexes(),a=Array.isArray(r),s=0;for(r=a?r:r[Symbol.iterator]();;){var l;if(a){if(s>=r.length)break;l=r[s++]}else{if((s=r.next()).done)break;l=s.value}var d=l;if(d<o.length){var c,u=o[d].geometry;(c=i).push.apply(c,re(u,d))}else console.warn("selectedFeatureIndexes out of range "+d)}if(e&&e.length&&t){var p=!e.find(function(e){return e.isEditingHandle&&e.object&&"existing"===e.object.type})&&e.find(function(e){return!e.isEditingHandle});if(p&&!p.object.geometry.type.includes("Point")&&this.getSelectedFeatureIndexes().includes(p.index)){var g=null,h=[],f=Object(b.point)(t);if(function e(t,n,i){if(!Array.isArray(t[0]))return!0;for(var o=0;o<t.length;o++)if(e(t[o],[].concat(n,[o]),i)){i(t,n);break}return!1}(p.object.geometry.coordinates,[],function(e,t){var i=Object(b.lineString)(e),o=n.nearestPointOnLine(i,f);(!g||o.properties.dist<g.properties.dist)&&(g=o,h=t)}),g){var v=g,y=v.geometry.coordinates,m=v.properties.index;i=[].concat(i,[{position:y,positionIndexes:[].concat(h,[m+1]),featureIndex:p.index,type:"intermediate"}])}}}return i},n.nearestPointOnLine=function(e,t){if(e.geometry.coordinates.some(function(e){return e.length>2})){var n=this.getModeConfig();if(n&&n.viewport)return function(e,t,n){var i=e.geometry.coordinates.map(function(e){var t=e[0],i=e[1],o=e[2],r=void 0===o?0:o;return n.project([t,i,r])}),o=n.project(t.geometry.coordinates),r=o[0],a=o[1],s=1/0,l={};i.forEach(function(e,t){var n=e[0],o=e[1];if(0!==t){var d=i[t-1],c=d[0],u=d[1],p=u-o,g=n-c,h=c*o-n*u,f=p*p+g*g,v=Math.abs(p*r+g*a+h)/Math.sqrt(f);v<s&&(s=v,l={index:t,x0:(g*(g*r-p*a)-p*h)/f,y0:(p*(-g*r+p*a)-g*h)/f})}});var d=l,c=d.index,u=d.x0,p=d.y0,g=i[c-1],h=g[0],f=g[1],v=g[2],y=void 0===v?0:v,m=i[c],C=m[0],S=m[1],x=m[2],P=void 0===x?0:x,b=ye(h,f,C,S),w=function(e,t,n){return t*n+e*(1-n)}(y,P,ye(h,f,u,p)/b);return{type:"Feature",geometry:{type:"Point",coordinates:n.unproject([u,p,w])},properties:{dist:s,index:c-1}}}(e,t,n.viewport);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return de()(e,t)},n.handleClick=function(e){var t=null,n=ie(e.picks);if(n&&n.featureIndex>=0)if("existing"===n.type){var i;try{i=this.getImmutableFeatureCollection().removePosition(n.featureIndex,n.positionIndexes).getObject()}catch(r){}i&&(t={updatedData:i,editType:"removePosition",featureIndexes:[n.featureIndex],editContext:{positionIndexes:n.positionIndexes,position:n.position}})}else if("intermediate"===n.type){var o=this.getImmutableFeatureCollection().addPosition(n.featureIndex,n.positionIndexes,n.position).getObject();o&&(t={updatedData:o,editType:"addPosition",featureIndexes:[n.featureIndex],editContext:{positionIndexes:n.positionIndexes,position:n.position}})}return t},n.handlePointerMove=function(e){this._lastPointerMovePicks=e.picks;var t=null,n=ie(e.pointerDownPicks);e.isDragging&&n&&(t={updatedData:this.getImmutableFeatureCollection().replacePosition(n.featureIndex,n.positionIndexes,e.groundCoords).getObject(),editType:"movePosition",featureIndexes:[n.featureIndex],editContext:{positionIndexes:n.positionIndexes,position:e.groundCoords}});return{editAction:t,cancelMapPan:Boolean(n)}},n.handleStartDragging=function(e){var t=null,n=this.getSelectedFeatureIndexes(),i=ie(e.picks);n.length&&i&&"intermediate"===i.type&&(t={updatedData:this.getImmutableFeatureCollection().addPosition(i.featureIndex,i.positionIndexes,e.groundCoords).getObject(),editType:"addPosition",featureIndexes:[i.featureIndex],editContext:{positionIndexes:i.positionIndexes,position:e.groundCoords}});return t},n.handleStopDragging=function(e){var t=null,n=this.getSelectedFeatureIndexes(),i=ie(e.picks);n.length&&i&&(t={updatedData:this.getImmutableFeatureCollection().replacePosition(i.featureIndex,i.positionIndexes,e.groundCoords).getObject(),editType:"finishMovePosition",featureIndexes:[i.featureIndex],editContext:{positionIndexes:i.positionIndexes,position:e.groundCoords}});return t},n.getCursor=function(e){var t=e.isDragging,n=this._lastPointerMovePicks;if(n&&n.length>0&&n.some(function(e){return e.isEditingHandle}))return"cell";return t?"grabbing":"grab"},t}(ne);function Ce(e){var t=e.pointerDownScreenCoords,n=e.screenCoords;return 10*(t[1]-n[1])}var Se=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.makeElevatedEvent=function(e,t){if(!e.pointerDownScreenCoords)return e;var n=this._modeConfig||{},i=n.minElevation,o=void 0===i?0:i,r=n.maxElevation,a=void 0===r?2e4:r,s=n.calculateElevationChange,l=void 0===s?Ce:s,d=3===t.length?t[2]:0;return d+=l({pointerDownScreenCoords:e.pointerDownScreenCoords,screenCoords:e.screenCoords}),d=Math.min(d,a),d=Math.max(d,o),Object.assign({},e,{groundCoords:[t[0],t[1],d]})},n.handlePointerMove=function(t){var n=ie(t.pointerDownPicks),i=n?n.position:t.groundCoords;return e.prototype.handlePointerMove.call(this,this.makeElevatedEvent(t,i))},n.handleStopDragging=function(t){var n=ie(t.picks),i=n?n.position:t.groundCoords;return e.prototype.handleStopDragging.call(this,this.makeElevatedEvent(t,i))},n.getCursor=function(t){var n=e.prototype.getCursor.call(this,t);return"cell"===n&&(n="ns-resize"),n},t.calculateElevationChangeWithViewport=function(e,t){var n=t.pointerDownScreenCoords,i=t.screenCoords;return 156543.03392*Math.cos(e.latitude*Math.PI/180)/Math.pow(2,e.zoom)*(n[1]-i[1])/2},t}(me),xe=function(e){function t(t){var n;return(n=e.call(this)||this)._handler=t,n}o()(t,e);var n=t.prototype;return n.setFeatureCollection=function(e){this._handler.setFeatureCollection(e)},n.setModeConfig=function(e){this._modeConfig=e,this._handler.setModeConfig(e)},n.setSelectedFeatureIndexes=function(e){this._handler.setSelectedFeatureIndexes(e)},n._getSnappedMouseEvent=function(e,t){return Object.assign({},e,{groundCoords:t,pointerDownGroundCoords:this._startDragSnapHandlePosition})},n._getEditHandlePicks=function(e){var t=e.picks.find(function(e){return e.object&&"intermediate"===e.object.type}),n={potentialSnapHandle:t&&t.object},i=ie(e.pointerDownPicks);return i?Object.assign({},n,{pickedHandle:i}):n},n._updatePickedHandlePosition=function(e){var t=(this._editHandlePicks||{}).pickedHandle;if(t&&e)for(var n=e.featureIndexes,i=e.updatedData,o=0;o<n.length;o++){var r=n[o],a=i.features[r],s=t.positionIndexes,l=t.featureIndex;if(r>=0&&l===r){var d=a.geometry.coordinates;t.position=s.reduce(function(e,t){return e[t]},d)}}},n._getSnapTargets=function(){var e=(this.getModeConfig()||{}).additionalSnapTargets;return e=e||[],[].concat(this._handler.featureCollection.getObject().features,e)},n._getNonPickedIntermediateHandles=function(){for(var e=[],t=this._getSnapTargets(),n=0;n<t.length;n++){if(n<t.length&&!this._handler.getSelectedFeatureIndexes().includes(n)){var i=t[n].geometry;e.push.apply(e,re(i,n,"intermediate"))}}return e},n.getEditHandles=function(e,t){var n=(this._modeConfig||{}).enableSnapping,i=this._handler.getEditHandles(e,t);if(!n)return i;var o=(this._editHandlePicks||{}).pickedHandle;if(o)return i.push.apply(i,this._getNonPickedIntermediateHandles().concat([o])),i;var r=this._handler.featureCollection.getObject().features,a=this._handler.getSelectedFeatureIndexes(),s=Array.isArray(a),l=0;for(a=s?a:a[Symbol.iterator]();;){var d;if(s){if(l>=a.length)break;d=a[l++]}else{if((l=a.next()).done)break;d=l.value}var c=d;if(c<r.length){var u=r[c].geometry;i.push.apply(i,re(u,c,"snap"))}}return i.filter(Boolean)},n._performSnapIfRequired=function(){if(!this._isSnapped){var e=this._editHandlePicks||{},t=e.pickedHandle,n=e.potentialSnapHandle;t&&n&&(this._isSnapped=!0)}},n._performUnsnapIfRequired=function(){this._isSnapped&&((this._editHandlePicks||{}).potentialSnapHandle||(this._isSnapped=!1))},n._getSnapAwareEvent=function(e){var t=(this._editHandlePicks||{}).potentialSnapHandle;return t&&t.position?this._getSnappedMouseEvent(e,t.position):e},n.handleStartDragging=function(e){return this._startDragSnapHandlePosition=(ie(e.picks)||{}).position,this._handler.handleStartDragging(e)},n.handleStopDragging=function(e){var t=this._handler.handleStopDragging(this._getSnapAwareEvent(e));return this._editHandlePicks=null,this._isSnapped=!1,t},n.getCursor=function(e){return this._handler.getCursor(e)},n.handlePointerMove=function(e){(this._handler.getModeConfig()||{}).enableSnapping&&(this._editHandlePicks=this._getEditHandlePicks(e),this._editHandlePicks&&(this._performSnapIfRequired(),this._performUnsnapIfRequired()));var t=this._handler.handlePointerMove(this._getSnapAwareEvent(e)),n=t.editAction;return n&&this._updatePickedHandlePosition(n),t},t}(ne),Pe=n(396),be=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.handlePointerMove=function(e){var t=null;return this._isTranslatable=Boolean(this._geometryBeforeTranslate)||this.isSelectionPicked(e.picks),this._isTranslatable&&e.pointerDownGroundCoords?(e.isDragging&&this._geometryBeforeTranslate&&(t=this.getTranslateAction(e.pointerDownGroundCoords,e.groundCoords,"translating")),{editAction:t,cancelMapPan:!0}):{editAction:null,cancelMapPan:!1}},n.handleStartDragging=function(e){return this._isTranslatable?(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(),null):null},n.handleStopDragging=function(e){var t=null;return this._geometryBeforeTranslate&&(t=this.getTranslateAction(e.pointerDownGroundCoords,e.groundCoords,"translated"),this._geometryBeforeTranslate=null),t},n.getCursor=function(e){var t=e.isDragging;return this._isTranslatable?"move":t?"grabbing":"grab"},n.getTranslateAction=function(e,t,n){if(!this._geometryBeforeTranslate)return null;for(var i=Object(b.point)(e),o=Object(b.point)(t),r=E()(i,o),a=ge()(i,o),s=Object(Pe.a)(this._geometryBeforeTranslate,r,a),l=this.getImmutableFeatureCollection(),d=this.getSelectedFeatureIndexes(),c=0;c<d.length;c++){var u=d[c],p=s.features[c];l=l.replaceGeometry(u,p.geometry)}return{updatedData:l.getObject(),editType:n,featureIndexes:d,editContext:null}},t}(ne),we=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.handleStartDragging=function(e){return this._isTranslatable?(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(),this._geometryBeforeTranslate?this.getAddManyFeaturesAction(this._geometryBeforeTranslate):null):null},n.getCursor=function(e){var t=e.isDragging;return this._isTranslatable?"copy":t?"grabbing":"grab"},t}(be),ke=n(296),Fe=n.n(ke),Me=n(307),Ie=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.handlePointerMove=function(e){var t=null;return this._isRotatable=Boolean(this._geometryBeingRotated)||this.isSelectionPicked(e.picks),this._isRotatable&&e.pointerDownGroundCoords?(e.isDragging&&this._geometryBeingRotated&&(t=this.getRotateAction(e.pointerDownGroundCoords,e.groundCoords,"rotating")),{editAction:t,cancelMapPan:!0}):{editAction:null,cancelMapPan:!1}},n.handleStartDragging=function(e){return this._isRotatable?(this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(),null):null},n.handleStopDragging=function(e){var t=null;return this._geometryBeingRotated&&(t=this.getRotateAction(e.pointerDownGroundCoords,e.groundCoords,"rotated"),this._geometryBeingRotated=null),t},n.getCursor=function(e){var t=e.isDragging;return this._isRotatable?"move":t?"grabbing":"grab"},n.getRotateAction=function(e,t,n){for(var i=e,o=function(e,t,n){var i=ge()(e,t);return ge()(e,n)-i}(Fe()(this._geometryBeingRotated),i,t),r=Object(Me.a)(this._geometryBeingRotated,o),a=this.getImmutableFeatureCollection(),s=this.getSelectedFeatureIndexes(),l=0;l<s.length;l++){var d=s[l],c=r.features[l];a=a.replaceGeometry(d,c.geometry)}return{updatedData:a.getObject(),editType:n,featureIndexes:s,editContext:null}},t}(ne);var Ee=n(394),De=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.handlePointerMove=function(e){var t=null;return this._isScalable=Boolean(this._geometryBeingScaled)||this.isSelectionPicked(e.picks),this._isScalable&&e.pointerDownGroundCoords?(e.isDragging&&this._geometryBeingScaled&&(t=this.getScaleAction(e.pointerDownGroundCoords,e.groundCoords,"scaling")),{editAction:t,cancelMapPan:!0}):{editAction:null,cancelMapPan:!1}},n.handleStartDragging=function(e){return this._isScalable?(this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(),null):null},n.handleStopDragging=function(e){var t=null;return this._geometryBeingScaled&&(t=this.getScaleAction(e.pointerDownGroundCoords,e.groundCoords,"scaled"),this._geometryBeingScaled=null),t},n.getCursor=function(e){var t=e.isDragging;return this._isScalable?"move":t?"grabbing":"grab"},n.getScaleAction=function(e,t,n){for(var i=e,o=Fe()(this._geometryBeingScaled),r=function(e,t,n){var i=E()(e,t);return E()(e,n)/i}(o,i,t),a=Object(Ee.a)(this._geometryBeingScaled,r,{origin:o}),s=this.getImmutableFeatureCollection(),l=this.getSelectedFeatureIndexes(),d=0;d<l.length;d++){var c=l[d],u=a.features[d];s=s.replaceGeometry(c,u.geometry)}return{updatedData:s.getObject(),editType:n,featureIndexes:l,editContext:null}},t}(ne);var Ae=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handleClick=function(e){var t={type:"Point",coordinates:e.groundCoords};return this.getAddFeatureAction(t)},t}(ne),He=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this,t);var n=null,i=this.getSelectedFeatureIndexes(),o=this.getSelectedGeometry(),r=this.getTentativeFeature(),a=this.getClickSequence();if(i.length>1||o&&"LineString"!==o.type)return console.warn("drawLineString mode only supported for single LineString selection"),this.resetClickSequence(),null;if(o&&"LineString"===o.type){var s=[o.coordinates.length],l=this.getModeConfig();l&&l.drawAtFront&&(s=[0]);var d=i[0];n={updatedData:this.getImmutableFeatureCollection().addPosition(d,s,t.groundCoords).getObject(),editType:"addPosition",featureIndexes:[d],editContext:{positionIndexes:s,position:t.groundCoords}},this.resetClickSequence()}else if(2===a.length&&r){var c=r.geometry;n=this.getAddFeatureAction(c),this.resetClickSequence()}return n},n.handlePointerMove=function(e){var t={editAction:null,cancelMapPan:!1},n=this.getClickSequence(),i=e.groundCoords,o=null,r=this.getSelectedFeatureIndexes(),a=this.getSelectedGeometry();if(r.length>1||a&&"LineString"!==a.type)return t;if(a&&"LineString"===a.type){o=a.coordinates[a.coordinates.length-1];var s=this.getModeConfig();s&&s.drawAtFront&&(o=a.coordinates[0])}else 1===n.length&&(o=n[0]);return o&&this._setTentativeFeature({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[o,i]}}),t},t}(ne),Le=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.getEditHandles=function(t,n){var i=e.prototype.getEditHandles.call(this,t,n);return this._tentativeFeature&&(i=i.concat(re(this._tentativeFeature.geometry,-1)),this._tentativeFeature&&"LineString"===this._tentativeFeature.geometry.type?i=i.slice(0,-1):this._tentativeFeature&&"Polygon"===this._tentativeFeature.geometry.type&&(i=i.slice(0,-1))),i},n.handleClick=function(t){e.prototype.handleClick.call(this,t);var n=t.picks,i=this.getTentativeFeature(),o=null,r=ie(n);if(r){var a=this.getClickSequence();a.splice(a.length-1,1)}if(i&&"Polygon"===i.geometry.type){var s=i.geometry;if(r&&-1===r.featureIndex&&(0===r.positionIndexes[1]||r.positionIndexes[1]===s.coordinates[0].length-3)){var l={type:"Polygon",coordinates:[[].concat(s.coordinates[0].slice(0,-2),[s.coordinates[0][0]])]};this.resetClickSequence(),this._setTentativeFeature(null),o=this.getAddFeatureOrBooleanPolygonAction(l)}}var d={screenCoords:[-1,-1],groundCoords:t.groundCoords,picks:[],isDragging:!1,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownGroundCoords:null,sourceEvent:null};return this.handlePointerMove(d),o},n.handlePointerMove=function(e){var t=e.groundCoords,n=this.getClickSequence(),i={editAction:null,cancelMapPan:!1};return 0===n.length?i:(n.length<3?this._setTentativeFeature({type:"Feature",geometry:{type:"LineString",coordinates:[].concat(n,[t])}}):this._setTentativeFeature({type:"Feature",geometry:{type:"Polygon",coordinates:[[].concat(n,[t,n[0]])]}}),i)},t}(ne),_e=n(270),Te=n.n(_e),Oe=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.getEditHandles=function(t,n){var i=e.prototype.getEditHandles.call(this,t,n),o=this.getTentativeFeature();return o&&(i=i.concat(re(o.geometry,-1)),o&&"LineString"===o.geometry.type?i=i.slice(0,-1):o&&"Polygon"===o.geometry.type&&(i=i.slice(0,-1))),i},n.handlePointerMove=function(e){var t=e.groundCoords,n=this.getClickSequence(),i={editAction:null,cancelMapPan:!1};if(0===n.length)return i;var o,r=this.getTentativeFeature();(r&&"Polygon"===r.geometry.type?n[n.length-1]=r.geometry.coordinates[0][n.length-1]:r&&"LineString"===r.geometry.type&&(n[n.length-1]=r.geometry.coordinates[n.length-1]),1===n.length)?o=t:o=ve(n[n.length-2],n[n.length-1],t)[0];return n.length<3?this._setTentativeFeature({type:"Feature",geometry:{type:"LineString",coordinates:[].concat(n,[o])}}):this._setTentativeFeature({type:"Feature",geometry:{type:"Polygon",coordinates:[[].concat(n,[o,n[0]])]}}),i},n.handleClick=function(t){e.prototype.handleClick.call(this,t);var n=t.picks,i=this.getTentativeFeature(),o=null,r=ie(n);if(i&&"Polygon"===i.geometry.type){var a=i.geometry;if(r&&-1===r.featureIndex&&(0===r.positionIndexes[1]||r.positionIndexes[1]===a.coordinates[0].length-3)){var s={type:"Polygon",coordinates:this.finalizedCoordinates([].concat(a.coordinates[0]))};this.resetClickSequence(),this._setTentativeFeature(null),o=this.getAddFeatureOrBooleanPolygonAction(s)}}var l={screenCoords:[-1,-1],groundCoords:t.groundCoords,picks:[],isDragging:!1,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownGroundCoords:null,sourceEvent:null};return this.handlePointerMove(l),o},n.finalizedCoordinates=function(e){var t=[[].concat(e.slice(0,-2),[e[0]])],n=this.getIntermediatePoint([].concat(e));if(n)t=[[].concat(e.slice(0,-2),[n,e[0]])];else{var i=[].concat(e);i.splice(-3,1),(n=this.getIntermediatePoint([].concat(i)))&&(t=[[].concat(e.slice(0,-3),[n,e[0]])])}return t},n.getIntermediatePoint=function(e){var t;if(e.length>4){var n=[].concat(e),i=n[0],o=n[1],r=ge()(i,o),a=e[e.length-3],s=e[e.length-4],l=ge()(a,s),d={first:[],second:[]};[1,2,3].forEach(function(e){var t=r+90*e;d.first.push(t>180?t-360:t);var n=l+90*e;d.second.push(n>180?n-360:n)});var c=E()(Object(b.point)(i),Object(b.point)(a));[0,1,2].forEach(function(e){var n=Object(b.lineString)([i,ue()(i,c,d.first[e]).geometry.coordinates]);[0,1,2].forEach(function(e){var i=Object(b.lineString)([a,ue()(a,c,d.second[e]).geometry.coordinates]),o=Te()(n,i);o&&o.features.length&&(t=o.features[0].geometry.coordinates)})})}return t},t}(ne),je=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this,t);var n=this.getTentativeFeature();if(this.getClickSequence().length>1&&n&&"Polygon"===n.geometry.type){var i=this.getAddFeatureOrBooleanPolygonAction(n.geometry);return this.resetClickSequence(),this._setTentativeFeature(null),i}return null},t}(ne),Re=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handlePointerMove=function(e){var t={editAction:null,cancelMapPan:!1},n=this.getClickSequence();if(0===n.length)return t;var i=n[0],o=e.groundCoords;return this._setTentativeFeature(k()([i[0],i[1],o[0],o[1]])),t},t}(je),ze=n(376),Ge=n.n(ze),We=n(377),Be=n.n(We),Ne=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.calculateGroundCoords=function(e,t){var n=this.getModeConfig();if(!n||!n.lock90Degree||!e.length)return t;if(1===e.length){var i=e[0],o=this.getSelectedGeometry(),r=Be()(o),a="FeatureCollection"===r.type?r.features:[r],s=Number.MAX_SAFE_INTEGER,l=null;if(a.forEach(function(e){var t=de()(e,i),n=E()(t,i);s>n&&(s=n,l=t)}),l){var d=ge()(i,l),c=E()(i,t,{units:"meters"});return ue()(i,c,d,{units:"meters"}).geometry.coordinates}return t}var u=e[e.length-1],p=ve(e[e.length-2],u,t)[0];return de()(Object(b.lineString)([u,p]),t).geometry.coordinates},n.handleClick=function(t){e.prototype.handleClick.call(this,Object.assign({},t,{groundCoords:this.calculateGroundCoords(this.getClickSequence(),t.groundCoords)}));var n=this.getTentativeFeature(),i=this.getSelectedGeometry(),o=this.getClickSequence();if(!i)return console.warn("A polygon must be selected for splitting"),this._setTentativeFeature(null),null;var r={type:"Point",coordinates:o[o.length-1]},a=Ge()(r,i);return o.length>1&&n&&!a?(this.resetClickSequence(),0===Te()(n,i).features.length?(this._setTentativeFeature(null),null):this.splitPolygon()):null},n.handlePointerMove=function(e){var t=e.groundCoords,n=this.getClickSequence(),i={editAction:null,cancelMapPan:!1};return 0===n.length?i:(this._setTentativeFeature({type:"Feature",geometry:{type:"LineString",coordinates:[].concat(n,[this.calculateGroundCoords(n,t)])}}),i)},n.splitPolygon=function(){var e=this.getSelectedGeometry(),t=this.getTentativeFeature(),n=this.getSelectedFeatureIndexes()[0],i=this.getModeConfig()||{},o=i.gap,r=void 0===o?.1:o,a=i.units,s=void 0===a?"centimeters":a;0===r&&(r=.1,s="centimeters");var l=Object(F.a)(t,r,{units:s}),d=Object(M.a)(e,l);if(this._setTentativeFeature(null),!d)return console.warn("Canceling edit. Split Polygon erased"),null;var c=d.geometry,u=c.type,p=c.coordinates,g=[];return g="Polygon"===u?p.map(function(e){return[e]}):p.reduce(function(e,t){return t.forEach(function(t){e.push([t])}),e},[]),{updatedData:this.getImmutableFeatureCollection().replaceGeometry(n,{type:"MultiPolygon",coordinates:g}).getObject(),editType:"split",featureIndexes:[n],editContext:null}},t}(ne),qe=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this,t);var n=this.getTentativeFeature();if(this.getClickSequence().length>2&&n&&"Polygon"===n.geometry.type){var i=this.getAddFeatureOrBooleanPolygonAction(n.geometry);return this.resetClickSequence(),this._setTentativeFeature(null),i}return null},t}(ne),Ue=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handlePointerMove=function(e){var t={editAction:null,cancelMapPan:!1},n=this.getClickSequence();if(0===n.length)return t;var i=e.groundCoords;if(1===n.length)this._setTentativeFeature({type:"Feature",geometry:{type:"LineString",coordinates:[n[0],i]}});else if(2===n.length){var o={type:"LineString",coordinates:n},r=n[0],a=ve(r,n[1],i),s=a[0],l=a[1];this._setTentativeFeature({type:"Feature",geometry:{type:"Polygon",coordinates:[[].concat(o.coordinates,[s,l,r])]}})}return t},t}(qe),Je=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handlePointerMove=function(e){var t={editAction:null,cancelMapPan:!1},n=this.getClickSequence();if(0===n.length)return t;var i=(this.getModeConfig()||{}).steps,o=void 0===i?64:i,r={steps:o};o<4&&(console.warn("Minimum steps to draw a circle is 4 "),r.steps=4);var a=n[0],s=Math.max(E()(a,e.groundCoords),.001);return this._setTentativeFeature(v()(a,s,r)),t},t}(je),Ve=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handlePointerMove=function(e){var t={editAction:null,cancelMapPan:!1},n=this.getClickSequence();if(0===n.length)return t;var i=(this.getModeConfig()||{}).steps,o=void 0===i?64:i,r={steps:o};o<4&&(console.warn("Minimum steps to draw a circle is 4 "),r.steps=4);var a=n[0],s=oe(a,e.groundCoords),l=Math.max(E()(a,s),.001);return this._setTentativeFeature(v()(s,l,r)),t},t}(je),Ze=n(309),Ke=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handlePointerMove=function(e){var t={editAction:null,cancelMapPan:!1},n=this.getClickSequence();if(0===n.length)return t;var i=n[0],o=e.groundCoords,r=Math.min(i[0],o[0]),a=Math.min(i[1],o[1]),s=Math.max(i[0],o[0]),l=Math.max(i[1],o[1]),d=k()([r,a,s,l]).geometry.coordinates[0],c=oe(i,o),u=Math.max(E()(Object(b.point)(d[0]),Object(b.point)(d[1])),.001),p=Math.max(E()(Object(b.point)(d[0]),Object(b.point)(d[3])),.001);return this._setTentativeFeature(Object(Ze.a)(c,u,p)),t},t}(je),Xe=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.handlePointerMove=function(e){var t={editAction:null,cancelMapPan:!1},n=this.getClickSequence();if(0===n.length)return t;var i=e.groundCoords;if(1===n.length)this._setTentativeFeature({type:"Feature",geometry:{type:"LineString",coordinates:[n[0],i]}});else if(2===n.length){var o=n[0],r=n[1],a=oe(o,r),s=Math.max(E()(a,Object(b.point)(i)),.001),l=Math.max(E()(o,r),.001)/2,d={angle:ge()(o,r)};this._setTentativeFeature(Object(Ze.a)(a,s,l,d))}return t},t}(qe),Qe=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).isPointAdded=!1,t}o()(t,e);var n=t.prototype;return n.handlePointerMove=function(e){this._lastPointerMovePicks=e.picks;var t=null,n=ie(e.pointerDownPicks);if(e.isDragging&&n){var i=this.coordinatesSize(n.positionIndexes,n.featureIndex),o=this.isPointAdded?this.nextPositionIndexes(n.positionIndexes,i):n.positionIndexes,r=this.getPointForPositionIndexes(this.prevPositionIndexes(o,i),n.featureIndex),a=this.getPointForPositionIndexes(o,n.featureIndex);if(r&&a){var s=ve(r,a,e.groundCoords),l=s[0],d=s[1];t={updatedData:this.getImmutableFeatureCollection().replacePosition(n.featureIndex,this.prevPositionIndexes(o,i),d).replacePosition(n.featureIndex,o,l).getObject(),editType:"extruding",featureIndexes:[n.featureIndex],editContext:{positionIndexes:this.nextPositionIndexes(n.positionIndexes,i),position:l}}}}return{editAction:t,cancelMapPan:Boolean(n)}},n.handleStartDragging=function(e){var t=null,n=this.getSelectedFeatureIndexes(),i=ie(e.picks);if(n.length&&i&&"intermediate"===i.type){var o=this.coordinatesSize(i.positionIndexes,i.featureIndex),r=this.getPointForPositionIndexes(this.prevPositionIndexes(i.positionIndexes,o),i.featureIndex),a=this.getPointForPositionIndexes(i.positionIndexes,i.featureIndex);if(r&&a){var s=this.getImmutableFeatureCollection();this.isOrthogonal(i.positionIndexes,i.featureIndex,o)||(s=s.addPosition(i.featureIndex,i.positionIndexes,a)),this.isOrthogonal(this.prevPositionIndexes(i.positionIndexes,o),i.featureIndex,o)||(s=s.addPosition(i.featureIndex,i.positionIndexes,r),this.isPointAdded=!0),t={updatedData:s.getObject(),editType:"startExtruding",featureIndexes:[i.featureIndex],editContext:{positionIndexes:i.positionIndexes,position:r}}}}return t},n.handleStopDragging=function(e){var t=null,n=this.getSelectedFeatureIndexes(),i=ie(e.picks);if(n.length&&i){var o=this.coordinatesSize(i.positionIndexes,i.featureIndex),r=this.isPointAdded?this.nextPositionIndexes(i.positionIndexes,o):i.positionIndexes,a=this.getPointForPositionIndexes(this.prevPositionIndexes(r,o),i.featureIndex),s=this.getPointForPositionIndexes(r,i.featureIndex);if(a&&s){var l=ve(a,s,e.groundCoords),d=l[0],c=l[1];t={updatedData:this.getImmutableFeatureCollection().replacePosition(i.featureIndex,this.prevPositionIndexes(r,o),c).replacePosition(i.featureIndex,r,d).getObject(),editType:"extruded",featureIndexes:[i.featureIndex],editContext:{positionIndexes:i.positionIndexes,position:d}}}}return this.isPointAdded=!1,t},n.coordinatesSize=function(e,t){var n=0,i=this.getImmutableFeatureCollection().getObject().features[t].geometry.coordinates;if(3===e.length){var o=e[0],r=e[1];i.length&&i[o].length&&(n=i[o][r].length)}else{var a=e[0];i.length&&i[a].length&&(n=i[a].length)}return n},n.getBearing=function(e,t){var n=ge()(e,t);return n<0?Math.floor(360+n):Math.floor(n)},n.isOrthogonal=function(e,t,n){e[e.length-1]===n-1&&(e[e.length-1]=0);var i=this.getPointForPositionIndexes(this.prevPositionIndexes(e,n),t),o=this.getPointForPositionIndexes(this.nextPositionIndexes(e,n),t),r=this.getPointForPositionIndexes(e,t),a=this.getBearing(r,i),s=this.getBearing(r,o);return[89,90,91,269,270,271].includes(Math.abs(a-s))},n.nextPositionIndexes=function(e,t){var n=[].concat(e);return n.length&&(n[n.length-1]=n[n.length-1]===t-1?0:n[n.length-1]+1),n},n.prevPositionIndexes=function(e,t){var n=[].concat(e);return n.length&&(n[n.length-1]=0===n[n.length-1]?t-2:n[n.length-1]-1),n},n.getPointForPositionIndexes=function(e,t){var n,i=this.getImmutableFeatureCollection().getObject().features[t].geometry.coordinates;if(3===e.length){var o=e[0],r=e[1],a=e[2];i.length&&i[o].length&&(n=i[o][r][a])}else{var s=e[0],l=e[1];i.length&&i[s].length&&(n=i[s][l])}return n},t}(me),Ye=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.onLayerClick=function(e){},n.onDoubleClick=function(e){},n.onStartDragging=function(e){},n.onStopDragging=function(e){},n.onPointerMove=function(e){},n.initializeState=function(){this.setState({_editableLayerState:{pointerHandlers:null,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownGroundCoords:null,isDragging:!1}})},n.finalizeState=function(){this._removePointerHandlers()},n.updateState=function(e){e.props,e.changeFlags;this._removePointerHandlers(),this._addPointerHandlers()},n._removePointerHandlers=function(){this.state._editableLayerState.pointerHandlers&&(this.context.gl.canvas.removeEventListener("pointermove",this.state._editableLayerState.pointerHandlers.onPointerMove),this.context.gl.canvas.removeEventListener("pointerdown",this.state._editableLayerState.pointerHandlers.onPointerDown),this.context.gl.canvas.removeEventListener("pointerup",this.state._editableLayerState.pointerHandlers.onPointerUp),this.context.gl.canvas.removeEventListener("dblclick",this.state._editableLayerState.pointerHandlers.onDoubleClick)),this.state._editableLayerState.pointerHandlers=null},n._addPointerHandlers=function(){this.state._editableLayerState.pointerHandlers={onPointerMove:this._onPointerMove.bind(this),onPointerDown:this._onPointerDown.bind(this),onPointerUp:this._onPointerUp.bind(this),onDoubleClick:this._onDoubleClick.bind(this)},this.context.gl.canvas.addEventListener("pointermove",this.state._editableLayerState.pointerHandlers.onPointerMove),this.context.gl.canvas.addEventListener("pointerdown",this.state._editableLayerState.pointerHandlers.onPointerDown),this.context.gl.canvas.addEventListener("pointerup",this.state._editableLayerState.pointerHandlers.onPointerUp),this.context.gl.canvas.addEventListener("dblclick",this.state._editableLayerState.pointerHandlers.onDoubleClick)},n._onDoubleClick=function(e){var t=this.getScreenCoords(e),n=this.getGroundCoords(t);this.onDoubleClick({groundCoords:n,sourceEvent:e})},n._onPointerDown=function(e){var t=this.getScreenCoords(e),n=this.getGroundCoords(t),i=this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth});this.setState({_editableLayerState:Object.assign({},this.state._editableLayerState,{pointerDownScreenCoords:t,pointerDownGroundCoords:n,pointerDownPicks:i,isDragging:!1})})},n._onPointerMove=function(e){var t=this.getScreenCoords(e),n=this.getGroundCoords(t),i=this.state._editableLayerState,o=i.pointerDownPicks,r=i.pointerDownScreenCoords,a=i.pointerDownGroundCoords,s=this.state._editableLayerState.isDragging;r&&!s&&this.movedEnoughForDrag(r,t)&&(this.onStartDragging({picks:o,screenCoords:t,groundCoords:n,pointerDownScreenCoords:r,pointerDownGroundCoords:a,sourceEvent:e}),s=!0,this.setState({_editableLayerState:Object.assign({},this.state._editableLayerState,{isDragging:s})}));var l=this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth});this.onPointerMove({screenCoords:t,groundCoords:n,picks:l,isDragging:s,pointerDownPicks:o,pointerDownScreenCoords:r,pointerDownGroundCoords:a,sourceEvent:e})},n._onPointerUp=function(e){var t=this.getScreenCoords(e),n=this.getGroundCoords(t),i=this.state._editableLayerState,o=i.pointerDownPicks,r=i.pointerDownScreenCoords,a=i.pointerDownGroundCoords,s=i.isDragging;r&&(s?this.onStopDragging({picks:o,screenCoords:t,groundCoords:n,pointerDownScreenCoords:r,pointerDownGroundCoords:a,sourceEvent:e}):this.movedEnoughForDrag(r,t)||this.onLayerClick({picks:o,screenCoords:t,groundCoords:n,sourceEvent:e}),this.setState({_editableLayerState:Object.assign({},this.state._editableLayerState,{pointerDownScreenCoords:null,pointerDownGroundCoords:null,pointerDownPicks:null,isDragging:!1})}))},n.getScreenCoords=function(e){return[e.clientX-this.context.gl.canvas.getBoundingClientRect().x,e.clientY-this.context.gl.canvas.getBoundingClientRect().y]},n.getGroundCoords=function(e){return this.context.viewport.unproject([e[0],e[1]])},n.movedEnoughForDrag=function(e,t){return Math.abs(e[0]-t[0])>7||Math.abs(e[1]-t[1])>7},t}(u.b);Ye.layerName="EditableLayer";var $e=[0,0,0,255],et=[0,0,0,144],tt=[144,144,144,255],nt=[144,144,144,144],it=[192,0,0,255],ot=[0,0,0,128],rt=[124,0,192,255],at=5,st=3,lt=7;function dt(e){switch(e.type){case"existing":return it;case"snap":return rt;case"intermediate":default:return ot}}var ct={mode:"modify",onEdit:function(){},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:1,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"meters",lineJointRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,getLineColor:function(e,t,n){return t?tt:$e},getFillColor:function(e,t,n){return t?nt:et},getRadius:function(e){return e&&e.properties&&e.properties.radius||e&&e.properties&&e.properties.size||1},getLineWidth:function(e){return e&&e.properties&&e.properties.lineWidth||1},getLineDashArray:function(e,t,n){return t&&"view"!==n?[7,4]:[0,0]},getTentativeLineDashArray:function(e,t){return[7,4]},getTentativeLineColor:function(e,t){return tt},getTentativeFillColor:function(e,t){return nt},getTentativeLineWidth:function(e,t){return e&&e.properties&&e.properties.lineWidth||1},editHandleType:"point",editHandleParameters:{},editHandleLayerProps:{},editHandlePointRadiusScale:1,editHandlePointOutline:!1,editHandlePointStrokeWidth:1,editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:dt,getEditHandlePointRadius:function(e){switch(e.type){case"existing":return at;case"snap":return lt;case"intermediate":default:return st}},editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,getEditHandleIcon:function(e){return e.type},getEditHandleIconSize:10,getEditHandleIconColor:dt,getEditHandleIconAngle:0,billboard:!0,modeHandlers:{view:new se,modify:new me,elevation:new Se,extrude:new Qe,rotate:new Ie,translate:new xe(new be),duplicate:new we,scale:new De,drawPoint:new Ae,drawLineString:new He,drawPolygon:new Le,draw90DegreePolygon:new Oe,split:new Ne,drawRectangle:new Re,drawRectangleUsing3Points:new Ue,drawCircleFromCenter:new Je,drawCircleByBoundingBox:new Ve,drawEllipseByBoundingBox:new Ke,drawEllipseUsing3Points:new Xe}},ut=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.renderLayers=function(){var e=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,lineDashJustified:this.props.lineDashJustified,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),getLineDashArray:this.selectionAwareAccessor(this.props.getLineDashArray),_subLayerProps:{"line-strings":{billboard:this.props.billboard},"polygons-stroke":{billboard:this.props.billboard}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode],getLineDashArray:[this.props.selectedFeatureIndexes,this.props.mode]}}),t=[new j.a(e)];return t=(t=t.concat(this.createTentativeLayers())).concat(this.createEditHandleLayers())},n.initializeState=function(){e.prototype.initializeState.call(this),this.setState({selectedFeatures:[],editHandles:[]})},n.shouldUpdateState=function(e){e.props,e.oldProps,e.context,e.oldContext;return e.changeFlags.stateChanged,!0},n.updateState=function(t){var n=t.props,i=t.oldProps,o=t.changeFlags;e.prototype.updateState.call(this,{props:n,changeFlags:o});var r=this.state.modeHandler;o.propsOrDataChanged&&(n.modeHandlers!==i.modeHandlers||n.mode!==i.mode?((r=n.modeHandlers[n.mode])||(console.warn("No handler configured for mode "+n.mode),r=new ne),r!==this.state.modeHandler&&this.setState({modeHandler:r}),r.setFeatureCollection(n.data)):o.dataChanged&&r.setFeatureCollection(n.data),r.setModeConfig(n.modeConfig),r.setSelectedFeatureIndexes(n.selectedFeatureIndexes),this.updateTentativeFeature(),this.updateEditHandles());var a=[];Array.isArray(n.selectedFeatureIndexes)&&(a=n.selectedFeatureIndexes.map(function(e){return n.data.features[e]})),this.setState({selectedFeatures:a})},n.selectionAwareAccessor=function(e){var t=this;return"function"!=typeof e?e:function(n){return e(n,t.isFeatureSelected(n),t.props.mode)}},n.isFeatureSelected=function(e){if(!this.props.data||!this.props.selectedFeatureIndexes)return!1;if(!this.props.selectedFeatureIndexes.length)return!1;var t=this.props.data.features.indexOf(e);return this.props.selectedFeatureIndexes.includes(t)},n.getPickingInfo=function(e){var t=e.info;return e.sourceLayer.id.endsWith("-edit-handles")&&(t.isEditingHandle=!0),t},n.createEditHandleLayers=function(){if(!this.state.editHandles.length)return[];var e,t=Object.assign({id:(this.props.editHandleType.layerName||this.props.editHandleType)+"-edit-handles",data:this.state.editHandles,fp64:this.props.fp64,parameters:this.props.editHandleParameters},this.props.editHandleLayerProps);switch(this.props.editHandleType){case"icon":e=new R.a(this.getSubLayerProps(Object.assign({},t,{iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeScale:this.props.editHandleIconSizeScale,getIcon:this.props.getEditHandleIcon,getSize:this.props.getEditHandleIconSize,getColor:this.props.getEditHandleIconColor,getAngle:this.props.getEditHandleIconAngle,getPosition:function(e){return e.position}})));break;case"point":e=new z.a(this.getSubLayerProps(Object.assign({},t,{radiusScale:this.props.editHandlePointRadiusScale,outline:this.props.editHandlePointOutline,strokeWidth:this.props.editHandlePointStrokeWidth,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:this.props.getEditHandlePointRadius,getColor:this.props.getEditHandlePointColor})));break;default:if("function"==typeof this.props.editHandleType)e=new(0,this.props.editHandleType)(this.getSubLayerProps(Object.assign({},t,{radiusScale:this.props.editHandlePointRadiusScale,outline:this.props.editHandlePointOutline,strokeWidth:this.props.editHandlePointStrokeWidth,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:this.props.getEditHandlePointRadius,getColor:this.props.getEditHandlePointColor})))}return[e]},n.createTentativeLayers=function(){var e=this;return this.state.tentativeFeature?[new j.a(this.getSubLayerProps({id:"tentative",data:this.state.tentativeFeature,fp64:this.props.fp64,pickable:!1,stroked:!0,autoHighlight:!1,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.editHandlePointRadiusScale,outline:this.props.editHandlePointOutline,strokeWidth:this.props.editHandlePointStrokeWidth,pointRadiusMinPixels:this.props.editHandlePointRadiusMinPixels,pointRadiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:this.props.getEditHandlePointRadius,getLineColor:function(t){return e.props.getTentativeLineColor(t,e.props.mode)},getLineWidth:function(t){return e.props.getTentativeLineWidth(t,e.props.mode)},getFillColor:function(t){return e.props.getTentativeFillColor(t,e.props.mode)},getLineDashArray:function(t){return e.props.getTentativeLineDashArray(t,e.state.selectedFeatures[0],e.props.mode)}}))]:[]},n.updateTentativeFeature=function(){var e=this.state.modeHandler.getTentativeFeature();e!==this.state.tentativeFeature&&(this.setState({tentativeFeature:e}),this.setLayerNeedsUpdate())},n.updateEditHandles=function(e,t){var n=this.state.modeHandler.getEditHandles(e,t);n!==this.state.editHandles&&(this.setState({editHandles:n}),this.setLayerNeedsUpdate())},n.onLayerClick=function(e){var t=this.state.modeHandler.handleClick(e);this.updateTentativeFeature(),this.updateEditHandles(),t&&this.props.onEdit(t)},n.onStartDragging=function(e){var t=this.state.modeHandler.handleStartDragging(e);this.updateTentativeFeature(),this.updateEditHandles(),t&&this.props.onEdit(t)},n.onStopDragging=function(e){var t=this.state.modeHandler.handleStopDragging(e);this.updateTentativeFeature(),this.updateEditHandles(),t&&this.props.onEdit(t)},n.onPointerMove=function(e){var t=e.groundCoords,n=e.picks,i=e.sourceEvent,o=this.state.modeHandler.handlePointerMove(e),r=o.editAction,a=o.cancelMapPan;this.updateTentativeFeature(),this.updateEditHandles(n,t),a&&i.stopPropagation(),r&&this.props.onEdit(r)},n.getCursor=function(e){var t=e.isDragging;return this.state.modeHandler.getCursor({isDragging:t})},t}(Ye);ut.layerName="EditableGeoJsonLayer",ut.defaultProps=ct;var pt=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.onLayerClick=function(e){},n.onDoubleClick=function(e){},n.onStartDragging=function(e){},n.onStopDragging=function(e){},n.onPointerMove=function(e){},n.initializeState=function(){this.setState({_editableLayerState:{pointerHandlers:null,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,isDragging:!1}})},n.finalizeState=function(){this._removePointerHandlers()},n.updateState=function(e){e.props,e.changeFlags;this._removePointerHandlers(),this._addPointerHandlers()},n._removePointerHandlers=function(){this.state._editableLayerState.pointerHandlers&&(this.context.gl.canvas.removeEventListener("pointermove",this.state._editableLayerState.pointerHandlers.onPointerMove),this.context.gl.canvas.removeEventListener("pointerdown",this.state._editableLayerState.pointerHandlers.onPointerDown),this.context.gl.canvas.removeEventListener("pointerup",this.state._editableLayerState.pointerHandlers.onPointerUp),this.context.gl.canvas.removeEventListener("dblclick",this.state._editableLayerState.pointerHandlers.onDoubleClick)),this.state._editableLayerState.pointerHandlers=null},n._addPointerHandlers=function(){this.state._editableLayerState.pointerHandlers={onPointerMove:this._onPointerMove.bind(this),onPointerDown:this._onPointerDown.bind(this),onPointerUp:this._onPointerUp.bind(this),onDoubleClick:this._onDoubleClick.bind(this)},this.context.gl.canvas.addEventListener("pointermove",this.state._editableLayerState.pointerHandlers.onPointerMove),this.context.gl.canvas.addEventListener("pointerdown",this.state._editableLayerState.pointerHandlers.onPointerDown),this.context.gl.canvas.addEventListener("pointerup",this.state._editableLayerState.pointerHandlers.onPointerUp),this.context.gl.canvas.addEventListener("dblclick",this.state._editableLayerState.pointerHandlers.onDoubleClick)},n._onDoubleClick=function(e){var t=this.getScreenCoords(e),n=this.getMapCoords(t);this.onDoubleClick({mapCoords:n,sourceEvent:e})},n._onPointerDown=function(e){var t=this.getScreenCoords(e),n=this.getMapCoords(t),i=this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius||10,depth:2});this.setState({_editableLayerState:Object.assign({},this.state._editableLayerState,{pointerDownScreenCoords:t,pointerDownMapCoords:n,pointerDownPicks:i,isDragging:!1})})},n._onPointerMove=function(e){var t=this.getScreenCoords(e),n=this.getMapCoords(t),i=this.state._editableLayerState,o=i.pointerDownPicks,r=i.pointerDownScreenCoords,a=i.pointerDownMapCoords,s=this.state._editableLayerState.isDragging;r&&!s&&this.movedEnoughForDrag(r,t)&&(this.onStartDragging({picks:o,screenCoords:t,mapCoords:n,pointerDownScreenCoords:r,pointerDownMapCoords:a,sourceEvent:e}),s=!0,this.setState({_editableLayerState:Object.assign({},this.state._editableLayerState,{isDragging:s})}));var l=this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius||10,depth:2});this.onPointerMove({screenCoords:t,mapCoords:n,picks:l,isDragging:s,pointerDownPicks:o,pointerDownScreenCoords:r,pointerDownMapCoords:a,sourceEvent:e})},n._onPointerUp=function(e){var t=this.getScreenCoords(e),n=this.getMapCoords(t),i=this.state._editableLayerState,o=i.pointerDownPicks,r=i.pointerDownScreenCoords,a=i.pointerDownMapCoords,s=i.isDragging;r&&(s?this.onStopDragging({picks:o,screenCoords:t,mapCoords:n,pointerDownScreenCoords:r,pointerDownMapCoords:a,sourceEvent:e}):this.movedEnoughForDrag(r,t)||this.onLayerClick({picks:o,screenCoords:t,mapCoords:n,sourceEvent:e}),this.setState({_editableLayerState:Object.assign({},this.state._editableLayerState,{pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null,isDragging:!1})}))},n.getScreenCoords=function(e){return[e.clientX-this.context.gl.canvas.getBoundingClientRect().x,e.clientY-this.context.gl.canvas.getBoundingClientRect().y]},n.getMapCoords=function(e){return this.context.viewport.unproject([e[0],e[1]])},n.movedEnoughForDrag=function(e,t){return Math.abs(e[0]-t[0])>7||Math.abs(e[1]-t[1])>7},t}(u.b);pt.layerName="EditableLayer_EDIT_MODE_POC";var gt=[0,0,0,255],ht=[0,0,0,144],ft=[144,144,144,255],vt=[144,144,144,144],yt=[192,0,0,255],mt=[0,0,0,128],Ct=[124,0,192,255],St=5,xt=3,Pt=7;function bt(e){switch(e.type){case"existing":return yt;case"snap":return Ct;case"intermediate":default:return mt}}var wt={mode:"modify",onEdit:function(){},pickable:!0,pickingRadius:10,fp64:!1,filled:!0,stroked:!0,lineWidthScale:1,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"meters",lineJointRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,getLineColor:function(e,t,n){return t?ft:gt},getFillColor:function(e,t,n){return t?vt:ht},getRadius:function(e){return e&&e.properties&&e.properties.radius||e&&e.properties&&e.properties.size||1},getLineWidth:function(e){return e&&e.properties&&e.properties.lineWidth||1},getLineDashArray:function(e,t,n){return t&&"view"!==n?[7,4]:[0,0]},getTentativeLineDashArray:function(e,t){return[7,4]},getTentativeLineColor:function(e,t){return ft},getTentativeFillColor:function(e,t){return vt},getTentativeLineWidth:function(e,t){return e&&e.properties&&e.properties.lineWidth||1},editHandleType:"point",editHandleParameters:{},editHandleLayerProps:{},editHandlePointRadiusScale:1,editHandlePointOutline:!1,editHandlePointStrokeWidth:1,editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:bt,getEditHandlePointRadius:function(e){switch(e.type){case"existing":return St;case"snap":return Pt;case"intermediate":default:return xt}},editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,getEditHandleIcon:function(e){return e.type},getEditHandleIconSize:10,getEditHandleIconColor:bt,getEditHandleIconAngle:0,modeHandlers:{view:new ee,drawPolygon:new te}},kt=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.renderLayers=function(){var e=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,lineDashJustified:this.props.lineDashJustified,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),getLineDashArray:this.selectionAwareAccessor(this.props.getLineDashArray),updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode],getLineDashArray:[this.props.selectedFeatureIndexes,this.props.mode]}}),t=[new j.a(e)];return t=(t=t.concat(this.createTentativeLayers())).concat(this.createEditHandleLayers())},n.initializeState=function(){e.prototype.initializeState.call(this),this.setState({cursor:"grab",selectedFeatures:[],editHandles:[]})},n.setState=function(t){e.prototype.setState.call(this,t),this.updateModeState(this.props)},n.shouldUpdateState=function(){return!0},n.updateState=function(t){var n=t.props,i=t.oldProps,o=t.changeFlags;e.prototype.updateState.call(this,{props:n,changeFlags:o});var r=this.state.modeHandler;o.propsOrDataChanged&&(n.modeHandlers===i.modeHandlers&&n.mode===i.mode||((r=n.modeHandlers[n.mode])||(console.warn("No handler configured for mode "+n.mode),r=new ee),r!==this.state.modeHandler&&this.setState({modeHandler:r})));var a=[];Array.isArray(n.selectedFeatureIndexes)&&(a=n.selectedFeatureIndexes.map(function(e){return n.data.features[e]})),this.setState({selectedFeatures:a})},n.updateModeState=function(e){var t=this;e.modeHandlers[e.mode].updateState({modeConfig:e.modeConfig,data:e.data,selectedIndexes:e.selectedFeatureIndexes,guides:this.state&&{tentativeFeature:this.state.tentativeFeature,editHandles:this.state.editHandles},cursor:this.state.cursor,onEdit:function(t){e.onEdit(t)},onUpdateGuides:function(e){e?t.setState({tentativeFeature:e.tentativeFeature,editHandles:e.editHandles}):t.setState({tentativeFeature:null,editHandles:null}),t.setLayerNeedsUpdate(),t.setNeedsRedraw()},onUpdateCursor:function(e){t.setState({cursor:e})}})},n.selectionAwareAccessor=function(e){var t=this;return"function"!=typeof e?e:function(n){return e(n,t.isFeatureSelected(n),t.props.mode)}},n.isFeatureSelected=function(e){if(!this.props.data||!this.props.selectedFeatureIndexes)return!1;if(!this.props.selectedFeatureIndexes.length)return!1;var t=this.props.data.features.indexOf(e);return this.props.selectedFeatureIndexes.includes(t)},n.getPickingInfo=function(e){var t=e.info;return e.sourceLayer.id.endsWith("-edit-handles")&&(t.isGuide=!0),t},n.createEditHandleLayers=function(){if(!this.state.editHandles.length)return[];var e,t=Object.assign({id:(this.props.editHandleType.layerName||this.props.editHandleType)+"-edit-handles",data:this.state.editHandles,fp64:this.props.fp64,parameters:this.props.editHandleParameters},this.props.editHandleLayerProps);switch(this.props.editHandleType){case"icon":e=new R.a(this.getSubLayerProps(Object.assign({},t,{iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeScale:this.props.editHandleIconSizeScale,getIcon:this.props.getEditHandleIcon,getSize:this.props.getEditHandleIconSize,getColor:this.props.getEditHandleIconColor,getAngle:this.props.getEditHandleIconAngle,getPosition:function(e){return e.position}})));break;case"point":e=new z.a(this.getSubLayerProps(Object.assign({},t,{radiusScale:this.props.editHandlePointRadiusScale,outline:this.props.editHandlePointOutline,strokeWidth:this.props.editHandlePointStrokeWidth,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:this.props.getEditHandlePointRadius,getColor:this.props.getEditHandlePointColor})));break;default:if("function"==typeof this.props.editHandleType)e=new(0,this.props.editHandleType)(this.getSubLayerProps(Object.assign({},t,{radiusScale:this.props.editHandlePointRadiusScale,outline:this.props.editHandlePointOutline,strokeWidth:this.props.editHandlePointStrokeWidth,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:this.props.getEditHandlePointRadius,getColor:this.props.getEditHandlePointColor})))}return[e]},n.createTentativeLayers=function(){var e=this;return this.state.tentativeFeature?[new j.a(this.getSubLayerProps({id:"tentative",data:this.state.tentativeFeature,fp64:this.props.fp64,pickable:!1,stroked:!0,autoHighlight:!1,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.editHandlePointRadiusScale,outline:this.props.editHandlePointOutline,strokeWidth:this.props.editHandlePointStrokeWidth,pointRadiusMinPixels:this.props.editHandlePointRadiusMinPixels,pointRadiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:this.props.getEditHandlePointRadius,getLineColor:function(t){return e.props.getTentativeLineColor(t,e.props.mode)},getLineWidth:function(t){return e.props.getTentativeLineWidth(t,e.props.mode)},getFillColor:function(t){return e.props.getTentativeFillColor(t,e.props.mode)},getLineDashArray:function(t){return e.props.getTentativeLineDashArray(t,e.state.selectedFeatures[0],e.props.mode)}}))]:[]},n.onLayerClick=function(e){this.getActiveModeHandler().handleClick(e)},n.onStartDragging=function(e){this.getActiveModeHandler().handleStartDragging(e)},n.onStopDragging=function(e){this.getActiveModeHandler().handleStopDragging(e)},n.onPointerMove=function(e){this.getActiveModeHandler().handlePointerMove(e)},n.getCursor=function(e){e.isDragging;return this.state.cursor},n.getActiveModeHandler=function(){return this.state.modeHandler},t}(pt);kt.layerName="EditableGeoJsonLayer_EDIT_MODE_POC",kt.defaultProps=wt;var Ft="rectangle",Mt="polygon",It={selectionType:Ft,layerIds:[],onSelect:function(){}},Et={type:"FeatureCollection",features:[]},Dt=["lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","lineWidthUnits","lineJointRounded","lineMiterLimit","pointRadiusScale","pointRadiusMinPixels","pointRadiusMaxPixels","lineDashJustified","getLineColor","getFillColor","getRadius","getLineWidth","getLineDashArray","getTentativeLineDashArray","getTentativeLineColor","getTentativeFillColor","getTentativeLineWidth"],At=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n._selectRectangleObjects=function(e){var t=this.props,n=t.layerIds,i=t.onSelect,o=this.context.viewport.project(e[0][0]),r=o[0],a=o[1],s=this.context.viewport.project(e[0][2]),l=s[0],d=s[1];i({pickingInfos:this.context.deck.pickObjects({x:Math.min(r,l),y:Math.min(a,d),width:Math.abs(l-r),height:Math.abs(d-a),layerIds:n})})},n._selectPolygonObjects=function(e){var t,n=this,i=this.props,o=i.layerIds,r=i.onSelect,a=e[0].map(function(e){return n.context.viewport.project(e)}),s=a.map(function(e){return e[0]}),l=a.map(function(e){return e[1]}),d=Math.min.apply(Math,s),c=Math.min.apply(Math,l),u=Math.max.apply(Math,s),p=Math.max.apply(Math,l),g=Object(b.polygon)(e),h=Object(F.a)(g,50);try{t=Object(M.a)(h,g)}catch(v){return void console.log("turfDifference() error",v)}this.setState({pendingPolygonSelection:{bigPolygon:t}});var f=this.props.id+"-selection-blocker";setTimeout(function(){var e=n.context.deck.pickObjects({x:d,y:c,width:u-d,height:p-c,layerIds:[f].concat(o)});r({pickingInfos:e.filter(function(e){return e.layer.id!==n.props.id})})},250)},n.renderLayers=function(){var e,t=this,n=this.state.pendingPolygonSelection,i=(e={},e[Ft]="drawRectangle",e[Mt]="drawPolygon",e)[this.props.selectionType]||"view",o={};Dt.forEach(function(e){void 0!==t.props[e]&&(o[e]=t.props[e])});var r=[new ut(this.getSubLayerProps(Object.assign({id:"selection-geojson",pickable:!0,mode:i,selectedFeatureIndexes:[],data:Et,onEdit:function(e){var n=e.updatedData;if("addFeature"===e.editType){var i=n.features[0].geometry.coordinates;t.props.selectionType===Ft?t._selectRectangleObjects(i):t.props.selectionType===Mt&&t._selectPolygonObjects(i)}}},o)))];if(n){var a=n.bigPolygon;r.push(new P.a(this.getSubLayerProps({id:"selection-blocker",pickable:!0,stroked:!1,opacity:1,data:[a],getLineColor:function(e){return[0,0,0,1]},getFillColor:function(e){return[0,0,0,1]},getPolygon:function(e){return e.geometry.coordinates}})))}return r},n.shouldUpdateState=function(e){var t=e.changeFlags,n=t.stateChanged,i=t.propsOrDataChanged;return n||i},t}(u.b);At.layerName="SelectionLayer",At.defaultProps=It;var Ht=n(408),Lt=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.renderLayers=function(){return[new z.a(Object.assign({},this.props,{id:this.props.id+"-ScatterplotLayer",data:this.props.data})),new Ht.a(Object.assign({},this.props,{id:this.props.id+"-LineLayer",data:this.props.data,pickable:!1,getSourcePosition:function(e){var t=e.position;return[t[0],t[1],0]},getTargetPosition:function(e){var t=e.position;return[t[0],t[1],t[2]||0]},getColor:[150,150,150,200],getStrokeWidth:3}))]},t}(u.b);Lt.layerName="ElevatedEditHandleLayer",Lt.defaultProps={};n(31);var _t=n(306),Tt=n(204),Ot={outlineEnabled:!1,outlineRenderShadowmap:!1,outlineShadowmap:null};var jt={name:"outline",vs:"attribute float instanceZLevel;\nvarying float outline_vzLevel;\nvarying vec4 outline_vPosition;\n\n// Set the z level for the outline shadowmap rendering\nvoid outline_setZLevel(float zLevel) {\n  outline_vzLevel = zLevel;\n}\n\n// Store an adjusted position for texture2DProj\nvoid outline_setUV(vec4 position) {\n  // mat4(\n  //   0.5, 0.0, 0.0, 0.0,\n  //   0.0, 0.5, 0.0, 0.0,\n  //   0.0, 0.0, 0.5, 0.0,\n  //   0.5, 0.5, 0.5, 1.0\n  // ) * position;\n  outline_vPosition = vec4(position.xyz * 0.5 + position.w * 0.5, position.w);\n}\n",fs:"uniform bool outline_uEnabled;\nuniform bool outline_uRenderOutlines;\nuniform sampler2D outline_uShadowmap;\n\nvarying float outline_vzLevel;\n// varying vec2 outline_vUV;\nvarying vec4 outline_vPosition;\n\nconst float OUTLINE_Z_LEVEL_ERROR = 0.01;\n\n// Return a darker color in shadowmap\nvec4 outline_filterShadowColor(vec4 color) {\n  return vec4(outline_vzLevel / 255., outline_vzLevel / 255., outline_vzLevel / 255., 1.);\n}\n\n// Return a darker color if in shadowmap\nvec4 outline_filterDarkenColor(vec4 color) {\n  if (outline_uEnabled) {\n    float maxZLevel;\n    if (outline_vPosition.q > 0.0) {\n      maxZLevel = texture2DProj(outline_uShadowmap, outline_vPosition).r * 255.;\n    } else {\n      discard;\n    }\n    if (maxZLevel < outline_vzLevel + OUTLINE_Z_LEVEL_ERROR) {\n      vec4(color.rgb * 0.5, color.a);\n    } else {\n      discard;\n    }\n  }\n  return color;\n}\n\n// if enabled and rendering outlines - Render depth to shadowmap\n// if enabled and rendering colors - Return a darker color if in shadowmap\n// if disabled, just return color\nvec4 outline_filterColor(vec4 color) {\n  if (outline_uEnabled) {\n    return outline_uRenderOutlines ?\n      outline_filterShadowColor(color) :\n      outline_filterDarkenColor(color);\n  }\n  return color;\n}\n",getUniforms:function(e){var t=void 0===e?Ot:e,n=t.outlineEnabled,i=t.outlineRenderShadowmap,o=t.outlineShadowmap,r={};return void 0!==n&&(r.outline_uEnabled=n),void 0!==i&&(r.outline_uRenderOutlines=i),void 0!==o&&(r.outline_uShadowmap=o),r}};function Rt(e){var t=e.source,n=e.code,i=void 0===n?"":n;return t.replace(/}[^{}]*$/,i.concat("\n}\n"))}var zt=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.getShaders=function(){var t=e.prototype.getShaders.call(this);return Object.assign({},t,{modules:t.modules.concat([jt]),vs:Rt({source:t.vs,code:"  outline_setUV(gl_Position);\n  outline_setZLevel(instanceZLevel);\n"}),fs:Rt({source:t.fs,code:"  gl_FragColor = outline_filterColor(gl_FragColor);\n"})})},n.initializeState=function(t){e.prototype.initializeState.call(this,t),this.setState({outlineFramebuffer:new Tt.f(t.gl),dummyTexture:new Tt.k(t.gl)}),this.state.attributeManager.addInstanced({instanceZLevel:{size:1,type:h.a.UNSIGNED_BYTE,update:this.calculateZLevels,accessor:"getZLevel"}})},n.draw=function(e){e.moduleParameters,e.parameters;var t=e.uniforms,n=(e.context,this.props),i=n.rounded,o=n.miterLimit,r=n.widthScale,a=n.widthMinPixels,s=n.widthMaxPixels,l=n.dashJustified;t=Object.assign({},t,{jointType:Number(i),alignMode:Number(l),widthScale:r,miterLimit:o,widthMinPixels:a,widthMaxPixels:s});var d=this.state,c=d.outlineFramebuffer,u=d.dummyTexture;c.resize(),c.clear({color:!0,depth:!0}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!0,outlineShadowmap:u}),this.state.model.draw({uniforms:Object.assign({},t,{jointType:0,widthScale:1.3*this.props.widthScale}),parameters:{depthTest:!1,blendEquation:h.a.MAX},framebuffer:c}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!1,outlineShadowmap:c}),this.state.model.draw({uniforms:Object.assign({},t,{jointType:Number(i),widthScale:this.props.widthScale}),parameters:{depthTest:!1}})},n.calculateZLevels=function(e){var t=this.props.getZLevel,n=this.state.pathTesselator;e.value=n._updateAttribute({target:e.value,size:1,getValue:function(e,n){return[t(e,n)||0]}})},t}(_t.a);zt.layerName="PathOutlineLayer",zt.defaultProps={getZLevel:{type:"accessor",value:0}};n(251),n(301),n(33);var Gt=Tt.q.fp64LowPart,Wt=Math.PI/180;function Bt(e,t,n){return"string"==typeof t?Object(Tt.loadTextures)(e,Object.assign({urls:[t]},n)).then(function(e){return e[0]}).catch(function(e){throw new Error("Could not load texture from "+t+": "+e)}):new Promise(function(i){return i(function(e,t,n){if(t instanceof Tt.k)return t;return new Tt.k(e,Object.assign({data:t},n))}(e,t,n))})}function Nt(e){!function(e,t){if(!e)throw new Error("deck.gl: "+t)}(e.positions&&e.normals&&e.texCoords)}function qt(e){if(e instanceof Tt.g)return Nt(e.attributes),e;if(e.positions)return Nt(e),new Tt.g({attributes:e});throw Error("Invalid mesh")}var Ut={mesh:null,texture:null,sizeScale:{type:"number",value:1,min:0},parameters:{depthTest:!0,depthFunc:h.a.LEQUAL},fp64:!1,lightSettings:{},getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:[0,0,0,255]},getYaw:{type:"accessor",value:function(e){return e.yaw||e.angle||0}},getPitch:{type:"accessor",value:function(e){return e.pitch||0}},getRoll:{type:"accessor",value:function(e){return e.roll||0}}},Jt=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.getShaders=function(){return{vs:"\n#define SHADER_NAME mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\n\n// Primitive attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 texCoords;\n\n// Instance attributes\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xy;\nattribute vec3 instanceRotations;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Outputs to fragment shader\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\n// yaw(z) pitch(y) roll(x)\nmat3 getRotationMatrix(vec3 rotation) {\n  float sr = sin(rotation.x);\n  float sp = sin(rotation.y);\n  float sw = sin(rotation.z);\n\n  float cr = cos(rotation.x);\n  float cp = cos(rotation.y);\n  float cw = cos(rotation.z);\n\n  return mat3(\n    cw * cp,                  // 0,0\n    sw * cp,                  // 1,0\n    -sp,                      // 2,0\n    -sw * cr + cw * sp * sr,  // 0,1\n    cw * cr + sw * sp * sr,   // 1,1\n    cp * sr,                  // 2,1\n    sw * sr + cw * sp * cr,   // 0,2\n    -cw * sr + sw * sp * cr,  // 1,2\n    cp * cr                   // 2,2\n  );\n}\n\nvoid main(void) {\n  mat3 rotationMatrix = getRotationMatrix(instanceRotations);\n\n  vec3 pos = rotationMatrix * positions;\n  pos = project_scale(pos * sizeScale);\n  // TODO - backward compatibility, remove in next major release\n  if (project_uPixelsPerMeter.y < 0.0) {\n    pos.y = -pos.y;\n  }\n\n  vec4 worldPosition;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xy, pos, worldPosition);\n\n  // TODO - transform normals\n\n  picking_setPickingColor(instancePickingColors);\n\n  vTexCoord = texCoords;\n  vColor = instanceColors;\n}\n",fs:"\n#define SHADER_NAME mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform vec4 color;\n\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = hasTexture ? texture2D(sampler, vTexCoord) : vColor / 255.;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}},n.initializeState=function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,accessor:"getPosition"},instancePositions64xy:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRotations:{size:3,accessor:["getYaw","getPitch","getRoll"],update:this.calculateInstanceRotations},instanceColors:{size:4,accessor:"getColor",defaultValue:[0,0,0,255]}}),this.setState({emptyTexture:new Tt.k(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})},n.updateState=function(e){var t=e.props,n=e.oldProps,i=e.changeFlags,o=this.getAttributeManager();i.dataChanged&&o.invalidateAll(),this._updateFP64(t,n),t.texture!==n.texture&&this.setTexture(t.texture)},n._updateFP64=function(e,t){e.fp64!==t.fp64&&(this.state.model&&this.state.model.delete(),this.setState({model:this.getModel(this.context.gl)}),this.setTexture(this.state.texture),this.getAttributeManager().invalidateAll())},n.draw=function(e){var t=e.uniforms,n=this.props.sizeScale;this.state.model.render(Object.assign({},t,{sizeScale:n}))},n.getModel=function(e){return new Tt.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:qt(this.props.mesh),isInstanced:!0,shaderCache:this.context.shaderCache}))},n.setTexture=function(e){var t=this,n=this.context.gl,i=this.state,o=i.model,r=i.emptyTexture;e?Bt(n,e).then(function(e){o.setUniforms({sampler:e,hasTexture:1}),t.setState({texture:e})}):(this.state.model.setUniforms({sampler:r,hasTexture:0}),this.setState({texture:null}))},n.calculateInstancePositions64xyLow=function(e){var t=this.use64bitPositions();if(e.constant=!t,t){var n=this.props,i=n.data,o=n.getPosition,r=e.value,a=0,s=i,l=Array.isArray(s),d=0;for(s=l?s:s[Symbol.iterator]();;){var c;if(l){if(d>=s.length)break;c=s[d++]}else{if((d=s.next()).done)break;c=d.value}var u=o(c);r[a++]=Gt(u[0]),r[a++]=Gt(u[1])}}else e.value=new Float32Array(2)},n.calculateInstanceRotations=function(e){var t=this.props,n=t.data,i=t.getYaw,o=t.getPitch,r=t.getRoll,a=e.value,s=(e.size,0),l=n,d=Array.isArray(l),c=0;for(l=d?l:l[Symbol.iterator]();;){var u;if(d){if(c>=l.length)break;u=l[c++]}else{if((c=l.next()).done)break;u=c.value}var p=u;a[s++]=r(p)*Wt,a[s++]=o(p)*Wt,a[s++]=i(p)*Wt}},t}(u.d);Jt.layerName="MeshLayer",Jt.defaultProps=Ut;var Vt=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Object.assign({},t,{attributes:Zt(t)}))||this}return o()(t,e),t}(Tt.g);function Zt(e){for(var t=e.length,n=void 0===t?1:t,i=e.headSize,o=void 0===i?.2:i,r=e.tailWidth,a=void 0===r?.05:r,s=e.tailStart,l=void 0===s?.05:s,d=[.5,1,0,.5-o/2,1-o,0,.5+o/2,1-o,0,.5-a/2,l,0,.5+a/2,1-o,0,.5+a/2,l,0,.5-a/2,l,0,.5-a/2,1-o,0,.5+a/2,1-o,0],c=new Array(d.length),u=0;u<d.length/3;u++){var p=3*u;c[p+0]=(d[p+0]-.5)*n,c[p+1]=(d[p+1]-.5)*n,c[p+2]=0}return{positions:new Float32Array(c),normals:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]),texCoords:new Float32Array(d)}}var Kt=n(345);function Xt(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].distance(e[n+1]);return t}var Qt=[0,0,0,255],Yt={forward:!0,backward:!1};function $t(e){var t=e.path,n=e.percentage,i=e.lineLength,o=e.color,r=e.object,a=e.projectFlat,s=i*n,l=0,d=0,c=0;for(c=0;c<t.length-1&&!((l+=t[c].distance(t[c+1]))>s);c++)d=l;var u=s-d,p=t[c+1].clone().subtract(t[c]).normalize().clone().multiply(new Kt.a(u,u)).add(t[c]),g=180*-new Kt.a(a(t[c+1])).subtract(a(t[c])).verticalAngle()/Math.PI;return{position:[p.x,p.y,0],angle:g,color:o,object:r}}var en=n(280),tn=n(224);function nn(e){var t=e.p,n=e.p1,i=e.p2,o=e.clampToLine,r=void 0===o||o,a=new en.a(i).subtract(n),s=new en.a(t).subtract(n),l=a.dot(s);return r&&(l=Object(tn.b)(l,0,1)),a.lerp(l)}var on=Jt,rn={mesh:new Vt({headSize:.2,tailWidth:.05})},an=Object.assign({},zt.defaultProps,{MarkerLayer:on,markerLayerProps:rn,sizeScale:100,fp64:!1,hightlightIndex:-1,highlightPoint:null,getPath:function(e){return e.path},getColor:function(e){return e.color},getMarkerColor:function(e){return[0,0,0,255]},getDirection:function(e){return e.direction},getMarkerPercentages:function(e,t){return t.lineLength>.1?[.25,.5,.75]:[.5]}}),sn=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.initializeState=function(){this.state={markers:[],mesh:new Vt({headSize:.2,tailWidth:.05}),closestPoint:null}},n.projectFlat=function(e,t,n,i){if(n===u.a.METER_OFFSETS){var o=t.metersToLngLatDelta(e),r=o[0],a=o[1],s=i[0],l=i[1];return t.projectFlat([s+r,a+l])}if(n===u.a.LNGLAT_OFFSETS){var d=e[0],c=e[1],p=i[0],g=i[1];return t.projectFlat([p+d,c+g])}return t.projectFlat(e)},n.updateState=function(e){var t=this,n=e.props,i=e.oldProps,o=e.changeFlags;if(o.dataChanged||o.updateTriggersChanged){var r=this.props,a=r.data,s=r.getPath,l=r.getDirection,d=r.getMarkerColor,c=r.getMarkerPercentages,u=r.coordinateSystem,p=r.coordinateOrigin,g=this.context.viewport;this.state.markers=function(e){var t=e.data,n=e.getPath,i=void 0===n?function(e){return e.path}:n,o=e.getDirection,r=void 0===o?function(e){return e.direction}:o,a=e.getColor,s=void 0===a?function(e){return Qt}:a,l=e.getMarkerPercentages,d=void 0===l?function(e){return[.5]}:l,c=e.projectFlat,u=[],p=t,g=Array.isArray(p),h=0;for(p=g?p:p[Symbol.iterator]();;){var f;if(g){if(h>=p.length)break;f=p[h++]}else{if((h=p.next()).done)break;f=h.value}var v=f,y=i(v),m=r(v)||Yt,C=s(v),S=y.map(function(e){return new Kt.a(e)}),x=S.slice(0).reverse(),P=Xt(S),b=d(v,{lineLength:P}),w=Array.isArray(b),k=0;for(b=w?b:b[Symbol.iterator]();;){var F;if(w){if(k>=b.length)break;F=b[k++]}else{if((k=b.next()).done)break;F=k.value}var M=F;if(m.forward){var I=$t({path:S,percentage:M,lineLength:P,color:C,object:v,projectFlat:c});u.push(I)}if(m.backward){var E=$t({path:x,percentage:M,lineLength:P,color:C,object:v,projectFlat:c});u.push(E)}}}return u}({data:a,getPath:s,getDirection:l,getColor:d,getMarkerPercentages:c,projectFlat:function(e){return t.projectFlat(e,g,u,p)}}),this._recalculateClosestPoint()}o.propsChanged&&n.point!==i.point&&this._recalculateClosestPoint()},n._recalculateClosestPoint=function(){var e=this.props,t=e.highlightPoint,n=e.highlightIndex;if(t&&n>=0){var i=this.props.data[n],o=function(e){var t=e.p,n=e.points;t=new en.a(t);for(var i=null,o=1/0,r=-1,a=0;a<n.length-1;++a){var s=nn({p:t,p1:n[a],p2:n[a+1]}),l=t.distanceSquared(s);l<o&&(o=l,i=s,r=a)}return{point:i,index:r,p1:n[r],p2:n[r+1],distanceSquared:o,distance:Math.sqrt(o)}}({points:this.props.getPath(i),p:t}).point;this.state.closestPoints=[{position:o}]}else this.state.closestPoints=[]},n.getPickingInfo=function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.path||t.object})},n.renderLayers=function(){return[new zt(this.props,this.getSubLayerProps({id:"paths",data:this.props.data})),new this.props.MarkerLayer(this.getSubLayerProps(Object.assign({},this.props.markerLayerProps,{id:"markers",data:this.state.markers,sizeScale:this.props.sizeScale,fp64:this.props.fp64,pickable:!1,parameters:{blend:!1,depthTest:!1}}))),this.state.closestPoints&&new z.a({id:this.props.id+"-highlight",data:this.state.closestPoints,fp64:this.props.fp64})]},t}(u.b);sn.layerName="PathMarkerLayer",sn.defaultProps=an;var ln=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.renderLayers=function(){var e=this.props,t=e.id,n=e.getFillColor,i=e.getStrokeColor,o=e.getInnerRadius,r=e.updateTriggers;return[new z.a(Object.assign({},this.props,{id:t+"-full",data:this.props.data,getColor:i,updateTriggers:Object.assign({},r,{getColor:r.getStrokeColor})})),new z.a(Object.assign({},this.props,{id:t+"-inner",data:this.props.data,getColor:n,getRadius:o,pickable:!1,updateTriggers:Object.assign({},r,{getColor:r.getFillColor,getRadius:r.getInnerRadius})}))]},t}(u.b);ln.layerName="JunctionScatterplotLayer",ln.defaultProps=Object.assign({},z.a.defaultProps,{getFillColor:function(e){return[0,0,0,255]},getStrokeColor:function(e){return[255,255,255,255]},getInnerRadius:function(e){return 1}});var dn=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this)||this).handlers=t,i.options=n,i}o()(t,e);var n=t.prototype;return n._coalesce=function(e,t){var n;void 0===t&&(t=null);for(var i=0;i<this.handlers.length&&(n=e(this.handlers[i]),t?!t(n):!n);i++);return n},n.setFeatureCollection=function(e){this.handlers.forEach(function(t){return t.setFeatureCollection(e)})},n.setModeConfig=function(e){this.handlers.forEach(function(t){return t.setModeConfig(e)})},n.setSelectedFeatureIndexes=function(e){this.handlers.forEach(function(t){return t.setSelectedFeatureIndexes(e)})},n.handleClick=function(e){return this._coalesce(function(t){return t.handleClick(e)})},n.handlePointerMove=function(e){return this._coalesce(function(t){return t.handlePointerMove(e)},function(e){return e&&Boolean(e.editAction)})},n.handleStartDragging=function(e){return this._coalesce(function(t){return t.handleStartDragging(e)})},n.handleStopDragging=function(e){return this._coalesce(function(t){return t.handleStopDragging(e)})},n.getTentativeFeature=function(){return this._coalesce(function(e){return e.getTentativeFeature()})},n.getEditHandles=function(e,t){return this._coalesce(function(n){return n.getEditHandles(e,t)},function(e){return Array.isArray(e)&&e.length>0})},n.getCursor=function(e){var t=e.isDragging;return this._coalesce(function(e){return e.getCursor({isDragging:t})})},t}(ne);n(86),n(302),n(405),n(18),(cn={})[m]={forward:!1,backward:!1},cn[C]={forward:!0,backward:!1},cn[S]={forward:!1,backward:!0},cn[x]={forward:!0,backward:!0},n(388);var cn,un=n(390),pn=n(391),gn=n.n(pn),hn={toolboxItem:{flexBasis:"50%"}},fn=s.a.div.withConfig({displayName:"toolbox__Toolbox",componentId:"afdrg1-0"})(["position:absolute;top:0px;left:0px;color:#f0f0f0;padding:0;width:230px;height:100%;font-family:Arial,Helvetica,sans-serif;font-size:16px;overflow:scroll;z-index:999;"]),vn=function(e){return a.a.createElement("div",null,e.children)},yn=function(e){return a.a.createElement("div",{style:hn.toolboxItem},e.children)},mn=s.a.div.withConfig({displayName:"toolbox__ToolboxTitle",componentId:"afdrg1-1"})(["background:rgba(39,45,59,0.8);font-size:16px;height:44px;display:flex;align-items:center;padding:0px 8px;"]),Cn=function(e){return e.selected?"rgba(30, 84, 183, 0.8)":"rgba(23, 28, 41, 0.8)"},Sn=s.a.button.withConfig({displayName:"toolbox__ToolboxButton",componentId:"afdrg1-2"})(["display:block;width:100%;border:none;color:#f0f0f0;background:",";text-align:left;text-transform:capitalize;font-size:16px;outline:none;height:44px;cursor:pointer;&:hover{background:#276ef1;}"],Cn),xn=s.a.div.withConfig({displayName:"toolbox__ToolboxCheckboxContainer",componentId:"afdrg1-3"})(["display:flex;align-items:center;width:100%;border:none;color:#f0f0f0;background:",";text-align:left;text-transform:capitalize;font-size:16px;outline:none;height:44px;cursor:pointer;&:hover{background:#276ef1;}"],Cn),Pn=function(e){return a.a.createElement("label",null,a.a.createElement(xn,null,a.a.createElement("input",Object.assign({},e,{children:null})),e.children))},bn=ut;d.a.location&&d.a.location.search&&-1!==d.a.location.search.indexOf("useEditModePoc")&&(bn=kt);var wn={mapContainer:{alignItems:"stretch",display:"flex",height:"100vh"},checkbox:{margin:10}},kn={bearing:0,height:0,latitude:37.76,longitude:-122.44,pitch:0,width:0,zoom:11},Fn=[{category:"View",modes:["view"]},{category:"Alter",modes:["modify","elevation","translate","rotate","scale","duplicate","extrude","split"]},{category:"Draw",modes:["drawPoint","drawLineString","drawPolygon","draw90DegreePolygon","drawRectangle","drawRectangleUsing3Points","drawCircleFromCenter","drawCircleByBoundingBox","drawEllipseByBoundingBox","drawEllipseUsing3Points"]},{category:"Composite",modes:["drawLineString+modify"]}],Mn=["drawPolygon","draw90DegreePolygon","drawRectangle","drawRectangleUsing3Points","drawCircleFromCenter","drawCircleByBoundingBox","drawEllipseByBoundingBox","drawEllipseUsing3Points"],In=Object.assign({"drawLineString+modify":new dn([new He,new me])},bn.defaultProps.modeHandlers);var En=["00AEE4","DAF0E3","9BCC32","07A35A","F7DF90","EA376C","6A126A","FCB09B","B0592D","C1B5E3","9C805B","CCDFE5"].map(function(e){var t=parseInt(e,16);return[16,8,0].map(function(e){return(t>>e&255)/255})});function Dn(e){switch(e.type){case"existing":return[255,128,0,255];case"snap":return[124,0,192,255];case"intermediate":default:return[0,0,0,128]}}var An=function(e){function t(){var t;return(t=e.call(this)||this)._onChangeViewport=function(e){t.setState({viewport:Object.assign({},t.state.viewport,e)})},t._onLayerClick=function(e){console.log("onLayerClick",e),"view"!==t.state.mode||t.state.selectionTool||(e?(console.log("select editing feature "+e.index),t.setState({selectedFeatureIndexes:[e.index]})):(console.log("deselect editing feature"),t.setState({selectedFeatureIndexes:[]})))},t._resize=function(){t.forceUpdate()},t._loadSample=function(e){if("mixed"===e)t.setState({testFeatures:un,selectedFeatureIndexes:[]});else if("complex"===e)t.setState({testFeatures:{type:"FeatureCollection",features:[v()([-122.45,37.81],4,{steps:5e3}),v()([-122.33,37.81],4,{steps:5e3}),v()([-122.45,37.73],4,{steps:5e3}),v()([-122.33,37.73],4,{steps:5e3})]},selectedFeatureIndexes:[]});else if("blank"===e)t.setState({testFeatures:{type:"FeatureCollection",features:[]}});else if("file"===e){var n=document.createElement("input");n.type="file",n.onchange=function(e){if(e.target.files&&e.target.files[0]){var n=new FileReader;n.onload=function(e){var n=e.target;t._parseStringJson(n.result)},n.readAsText(e.target.files[0])}},n.click()}},t._copy=function(){navigator&&navigator.clipboard?navigator.clipboard.writeText(JSON.stringify(t.state.testFeatures)):t._error("No navigator.clipboard")},t._paste=function(){navigator&&navigator.clipboard?navigator.clipboard.readText().then(function(e){t._parseStringJson(e)},function(e){t._error(e)}):t._error("No navigator.clipboard")},t._download=function(){var e=new Blob([JSON.stringify(t.state.testFeatures)],{type:"octet/stream"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download="nebula.geojson",n.click()},t._parseStringJson=function(e){var n=null;try{n=JSON.parse(e),Array.isArray(n)&&(n={type:"FeatureCollection",features:n}),console.log("Loaded JSON:",n),t.setState({testFeatures:n})}catch(i){t._error(i)}},t._error=function(e){alert(e)},t.state={viewport:kn,testFeatures:un,mode:"drawPolygon",modeConfig:null,pointsRemovable:!0,selectedFeatureIndexes:[],editHandleType:"point",selectionTool:null,showGeoJson:!1,featureMenu:null},t}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){d.a.addEventListener("resize",this._resize)},n.componentWillUnmount=function(){d.a.removeEventListener("resize",this._resize)},n._getHtmlColorForFeature=function(e,t){var n=En.length;return"rgba("+En[e%n].map(function(e){return 255*e}).join(",")+", "+(t?1:.7)+")"},n._getDeckColorForFeature=function(e,t,n){var i=En.length,o=En[e%i].map(function(e){return e*t*255});return[].concat(o,[255*n])},n._renderSelectFeatureCheckbox=function(e,t){var n=this,i=this.state.selectedFeatureIndexes;return a.a.createElement("div",{key:e},a.a.createElement(Pn,{style:wn.checkbox,type:"checkbox",checked:i.includes(e),onChange:function(){i.includes(e)?n.setState({selectedFeatureIndexes:i.filter(function(t){return t!==e})}):n.setState({selectedFeatureIndexes:[].concat(i,[e])})}},a.a.createElement("span",{style:{color:this._getHtmlColorForFeature(e,i.includes(e))}},e,": ",t),a.a.createElement("a",{style:{position:"absolute",right:12},onClick:function(t){t.preventDefault(),t.stopPropagation(),n.setState({selectedFeatureIndexes:[e],featureMenu:{index:e,x:t.clientX,y:t.clientY}})}},">>")))},n._renderSelectFeatureCheckboxes=function(){for(var e=this.state.testFeatures.features,t=[],n=0;n<e.length;++n)t.push(this._renderSelectFeatureCheckbox(n,e[n].geometry.type));return t},n._renderBooleanOperationControls=function(){var e=this;return a.a.createElement(vn,{key:"booleanOperations"},a.a.createElement(mn,null,"Boolean operation",a.a.createElement("br",null),"(requires single selection)"),a.a.createElement(yn,null,["union","difference","intersection"].map(function(t){return a.a.createElement(Sn,{key:t,selected:e.state.modeConfig&&e.state.modeConfig.booleanOperation===t,onClick:function(){e.state.modeConfig&&e.state.modeConfig.booleanOperation===t?e.setState({modeConfig:null}):e.setState({modeConfig:{booleanOperation:t}})}},t)})))},n._renderDrawLineStringModeControls=function(){var e=this;return a.a.createElement(vn,{key:"drawLineString"},a.a.createElement(mn,null,"Draw LineString At Front"),a.a.createElement(yn,null,a.a.createElement("input",{type:"checkbox",checked:Boolean(this.state.modeConfig&&this.state.modeConfig.drawAtFront),onChange:function(t){return e.setState({modeConfig:{drawAtFront:Boolean(t.target.checked)}})}})))},n._renderModifyModeControls=function(){var e=this;return a.a.createElement(vn,{key:"modify"},a.a.createElement(mn,null,"Allow removing points"),a.a.createElement(yn,null,a.a.createElement("input",{type:"checkbox",checked:this.state.pointsRemovable,onChange:function(){return e.setState({pointsRemovable:!e.state.pointsRemovable})}})))},n._renderSplitModeControls=function(){var e=this;return a.a.createElement(vn,{key:"split"},a.a.createElement(mn,null,"Constrain to 90°"),a.a.createElement(yn,null,a.a.createElement("input",{type:"checkbox",checked:Boolean(this.state.modeConfig&&this.state.modeConfig.lock90Degree),onChange:function(t){return e.setState({modeConfig:{lock90Degree:Boolean(t.target.checked)}})}})))},n._renderSnappingControls=function(){var e=this;return a.a.createElement("div",{key:"snap"},a.a.createElement(vn,null,a.a.createElement(mn,null,"Enable snapping"),a.a.createElement(yn,null,a.a.createElement("input",{type:"checkbox",checked:Boolean(this.state.modeConfig&&this.state.modeConfig.enableSnapping),onChange:function(t){var n=Object.assign({},e.state.modeConfig,{enableSnapping:Boolean(t.target.checked)});e.setState({modeConfig:n})}}))))},n._renderModeConfigControls=function(){var e=[];return Mn.indexOf(this.state.mode)>-1&&e.push(this._renderBooleanOperationControls()),"drawLineString"===this.state.mode&&e.push(this._renderDrawLineStringModeControls()),"modify"===this.state.mode&&e.push(this._renderModifyModeControls()),"split"===this.state.mode&&e.push(this._renderSplitModeControls()),"translate"===this.state.mode&&e.push(this._renderSnappingControls()),e},n._renderToolBox=function(){var e=this;return a.a.createElement(fn,null,Fn.map(function(t){return a.a.createElement(vn,{key:t.category},a.a.createElement(mn,null,t.category," Modes"),t.modes.map(function(t){return a.a.createElement(Sn,{key:t,selected:e.state.mode===t,onClick:function(){e.setState({mode:t,modeConfig:{},selectionTool:null})}},t)}))}),this._renderModeConfigControls(),this.state.showGeoJson&&a.a.createElement(a.a.Fragment,null,a.a.createElement(mn,null,"GeoJSON"),a.a.createElement(Sn,{onClick:function(){return e.setState({showGeoJson:!e.state.showGeoJson})}},"hide ▲"),a.a.createElement(yn,null,a.a.createElement("textarea",{id:"geo-json-text",rows:5,style:{width:"100%"},value:JSON.stringify(this.state.testFeatures),onChange:function(t){return e.setState({testFeatures:JSON.parse(t.target.value)})}}))),!this.state.showGeoJson&&a.a.createElement(a.a.Fragment,null,a.a.createElement(mn,null,"GeoJSON"),a.a.createElement(Sn,{onClick:function(){return e.setState({showGeoJson:!e.state.showGeoJson})}},"show ▼")),a.a.createElement(Sn,{onClick:function(){return e._copy()}},"Copy"),a.a.createElement(Sn,{onClick:function(){return e._paste()}},"Paste"),a.a.createElement(Sn,{onClick:function(){return e._download()}},"Download"),a.a.createElement(vn,null,a.a.createElement(mn,null,"Load data"),a.a.createElement(yn,null,a.a.createElement(Sn,{onClick:function(){return e._loadSample("mixed")}},"Mixed Sample"),a.a.createElement(Sn,{onClick:function(){return e._loadSample("complex")}},"Complex Sample"),a.a.createElement(Sn,{onClick:function(){return e._loadSample("blank")}},"Blank"),a.a.createElement(Sn,{onClick:function(){return e._loadSample("file")}},"Open file..."))),a.a.createElement(vn,null,a.a.createElement(mn,null,"Options"),a.a.createElement(yn,null,a.a.createElement(Pn,{type:"checkbox",checked:"icon"===this.state.editHandleType,onChange:function(){return e.setState({editHandleType:"icon"===e.state.editHandleType?"point":"icon"})}},"Use Icons")),a.a.createElement(yn,null,a.a.createElement(Pn,{type:"checkbox",checked:"elevated"===this.state.editHandleType,onChange:function(){return e.setState({editHandleType:"elevated"===e.state.editHandleType?"point":"elevated"})}},"Use ElevatedEditHandleLayer"))),a.a.createElement(vn,null,a.a.createElement(mn,null,"Select Features"),a.a.createElement(yn,null,a.a.createElement(Sn,{onClick:function(){return e.setState({selectedFeatureIndexes:[],selectionTool:D})}},"Clear Selection"),a.a.createElement(Sn,{onClick:function(){return e.setState({mode:"view",selectionTool:A})}},"Rect Select"),a.a.createElement(Sn,{onClick:function(){return e.setState({mode:"view",selectionTool:H})}},"Lasso Select"))),a.a.createElement(mn,null,"Features"),a.a.createElement(vn,null,this._renderSelectFeatureCheckboxes()))},n.renderStaticMap=function(e){return a.a.createElement(p.a,Object.assign({},e,{mapStyle:"mapbox://styles/mapbox/dark-v10"}))},n._featureMenuClick=function(e){var t=(this.state.featureMenu||{}).index,n=this.state.testFeatures;if("delete"===e){var i=[].concat(n.features);i.splice(t,1),n=Object.assign({},n,{features:i})}else"split"===e||"info"===e&&console.log(n.features[t]);this.setState({featureMenu:null,testFeatures:n})},n._renderFeatureMenu=function(e){var t=this,n=e.x,i=e.y;e.index;return a.a.createElement("div",{style:{position:"fixed",top:i-40,left:n+20}},a.a.createElement(Sn,{onClick:function(){return t._featureMenuClick("delete")}},"Delete"),a.a.createElement(Sn,{onClick:function(){return t._featureMenuClick("split")}},"Split"),a.a.createElement(Sn,{onClick:function(){return t._featureMenuClick("info")}},"Info"),a.a.createElement(Sn,{onClick:function(){return t._featureMenuClick("")}},"Close"))},n.customizeLayers=function(e){},n.render=function(){var e=this,t=this.state,n=t.testFeatures,i=t.selectedFeatureIndexes,o=t.mode,r=this.state.modeConfig,s=Object.assign({},this.state.viewport,{height:d.a.innerHeight,width:d.a.innerWidth});"elevation"===o?r=Object.assign({},r,{viewport:new y.a(s),calculateElevationChange:function(e){return Se.calculateElevationChangeWithViewport(s,e)}}):"modify"===o?r=Object.assign({},r,{viewport:new y.a(s)}):"translate"===o&&r&&r.enableSnapping&&(r=Object.assign({},r,{additionalSnapTargets:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[-122.52235,37.734008],[-122.52217,37.712706],[-122.49436,37.711979],[-122.49725,37.734306],[-122.52235,37.734008]]]}}]}));var l=new bn({id:"geojson",data:n,selectedFeatureIndexes:i,modeHandlers:In,mode:o,modeConfig:r,autoHighlight:!1,onEdit:function(t){var n=t.updatedData,i=t.editType,r=t.featureIndexes,a=t.editContext,s=e.state.selectedFeatureIndexes;["movePosition","extruding","rotating","translating","scaling"].includes(i)||console.log("onEdit",i,a),("removePosition"!==i||e.state.pointsRemovable)&&("addFeature"===i&&"duplicate"!==o&&(r=r||a.featureIndexes,s=[].concat(e.state.selectedFeatureIndexes,r)),e.setState({testFeatures:n,selectedFeatureIndexes:s}))},editHandleType:"elevated"===this.state.editHandleType?Lt:this.state.editHandleType,editHandleIconAtlas:gn.a,editHandleIconMapping:{intermediate:{x:0,y:0,width:58,height:58,mask:!1},existing:{x:58,y:0,width:58,height:58,mask:!1}},getEditHandleIcon:function(e){return e.type},getEditHandleIconSize:40,getEditHandleIconColor:Dn,lineWidthMinPixels:2,pointRadiusMinPixels:5,getLineDashArray:function(){return[0,0]},getFillColor:function(t,i){var o=n.features.indexOf(t);return i?e._getDeckColorForFeature(o,1,.5):e._getDeckColorForFeature(o,.5,.5)},getLineColor:function(t,i){var o=n.features.indexOf(t);return i?e._getDeckColorForFeature(o,1,1):e._getDeckColorForFeature(o,.5,1)},getEditHandlePointColor:Dn,editHandlePointRadiusScale:2,getTentativeLineDashArray:function(){return[7,4]},getTentativeLineColor:function(){return[143,143,143,255]},parameters:{depthTest:!0,depthMask:!1,blend:!0,blendEquation:h.a.FUNC_ADD,blendFunc:[h.a.SRC_ALPHA,h.a.ONE_MINUS_SRC_ALPHA]}}),p=[l];return this.state.selectionTool&&p.push(new At({id:"selection",selectionType:this.state.selectionTool,onSelect:function(t){var n=t.pickingInfos;e.setState({selectedFeatureIndexes:n.map(function(e){return e.index})})},layerIds:["geojson"],getTentativeFillColor:function(){return[255,0,255,100]},getTentativeLineColor:function(){return[0,0,255,255]},getTentativeLineDashArray:function(){return[0,0]},lineWidthMinPixels:3})),this.customizeLayers(p),a.a.createElement("div",{style:wn.mapContainer},a.a.createElement("link",{href:"https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css",rel:"stylesheet"}),a.a.createElement(c.a,{viewState:s,getCursor:l.getCursor.bind(l),layers:p,views:new u.f({id:"basemap",controller:{type:u.e,doubleClickZoom:"view"===this.state.mode&&!this.state.selectionTool}}),onClick:this._onLayerClick,onViewStateChange:function(t){var n=t.viewState;return e.setState({viewport:n})}},this.renderStaticMap(s)),this._renderToolBox(),this.state.featureMenu&&this._renderFeatureMenu(this.state.featureMenu))},t}(r.Component);n.d(t,"default",function(){return Ln});var Hn=s.a.div.withConfig({displayName:"geojson-editor__Container",componentId:"pmy68k-0"})(["width:100%;height:calc(100vh - 4rem);margin-top:4rem;"]),Ln=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.render=function(){return a.a.createElement(Hn,{id:"geoJsonEditorContainer"},a.a.createElement(An,null))},t}(r.Component)},272:function(e,t){},379:function(e,t){},380:function(e,t){},389:function(e,t){},390:function(e){e.exports={type:"FeatureCollection",features:[{type:"Feature",properties:{"marker-color":"#ff0000","marker-size":"medium","marker-symbol":""},geometry:{type:"Point",coordinates:[-122.44477272033691,37.79906910652822]}},{type:"Feature",properties:{"marker-color":"#0000ff","marker-size":"large","marker-symbol":""},geometry:{type:"Point",coordinates:[-122.42451667785645,37.8019175085504]}},{type:"Feature",properties:{"marker-size":"small"},geometry:{type:"MultiPoint",coordinates:[[-122.46923446655273,37.803273851858656],[-122.46957778930665,37.79934038764369],[-122.46434211730958,37.80313821864869],[-122.46451377868652,37.8001542250124]]}},{type:"Feature",properties:{stroke:"#ff0000","stroke-width":10,"stroke-opacity":1},geometry:{type:"LineString",coordinates:[[-122.40880966186523,37.783536601521924],[-122.43893623352051,37.779669924659004],[-122.43515968322752,37.7624370109886],[-122.42348670959471,37.77180027337861],[-122.4250316619873,37.778584505321376],[-122.42314338684082,37.778652344496926],[-122.42357254028322,37.77987343901049],[-122.41198539733887,37.78109451335266]]}},{type:"Feature",properties:{stroke:"#408000","stroke-width":2,"stroke-opacity":1},geometry:{type:"MultiLineString",coordinates:[[[-122.39670753479004,37.7947284731866],[-122.44726181030273,37.788352705583755]],[[-122.44709014892577,37.78733524495977],[-122.39670753479004,37.79371110035437]]]}},{type:"Feature",properties:{stroke:"#800000","stroke-width":3,"stroke-opacity":.5,fill:"#ffff66","fill-opacity":1},geometry:{type:"Polygon",coordinates:[[[-122.51129150390625,37.771461045439764],[-122.46588706970215,37.77342854582093],[-122.45464324951172,37.77471756940714],[-122.45284080505371,37.76644028998291],[-122.45747566223145,37.765761783370465],[-122.45902061462401,37.76644028998291],[-122.5100040435791,37.763997637045456],[-122.51026153564452,37.767254489700846],[-122.51129150390625,37.771461045439764]],[[-122.50802993774414,37.770239811973674],[-122.45644569396974,37.77302148107203],[-122.45515823364258,37.76759373693769],[-122.45884895324706,37.76847577247014],[-122.50811576843262,37.765693932366865],[-122.50802993774414,37.770239811973674]]]}},{type:"Feature",properties:{stroke:"#004080","stroke-width":2,"stroke-opacity":1,fill:"#66ff66","fill-opacity":.5},geometry:{type:"MultiPolygon",coordinates:[[[[-122.4717664718628,37.73094604426975],[-122.47253894805908,37.71706268973759],[-122.47116565704346,37.71275119199666],[-122.47017860412596,37.71275119199666],[-122.46803283691405,37.712411693330296],[-122.46524333953857,37.712445643266925],[-122.46339797973633,37.71146108878938],[-122.46026515960692,37.71037466866717],[-122.45494365692137,37.7111215842122],[-122.44975090026854,37.71533133102705],[-122.4481201171875,37.72123815310796],[-122.45236873626708,37.723037263958275],[-122.4605655670166,37.72480238685191],[-122.46584415435791,37.72670324138648],[-122.46803283691405,37.72863798965106],[-122.468204498291,37.72938472107615],[-122.4717664718628,37.73094604426975]]],[[[-122.435245513916,37.73155698786267],[-122.42983818054199,37.73237157147889],[-122.42563247680664,37.73155698786267],[-122.42048263549805,37.73182851673044],[-122.41559028625487,37.732100044602525],[-122.40846633911133,37.73488314788311],[-122.40752220153807,37.73732676207096],[-122.40769386291502,37.74173863896063],[-122.4052906036377,37.74920429313147],[-122.4085521697998,37.748322027789115],[-122.42511749267578,37.74777909004261],[-122.42374420166016,37.73977029560411],[-122.42683410644533,37.73603708685575],[-122.435245513916,37.73155698786267]]],[[[-122.49532699584961,37.75347973770911],[-122.493953704834,37.73379707124429],[-122.4752426147461,37.73488314788311],[-122.47644424438477,37.75429408009598],[-122.49532699584961,37.75347973770911]]]]}}]}},391:function(e,t){e.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=component---src-pages-geojson-editor-js-d24d5d66bb1cbb779818.js.map